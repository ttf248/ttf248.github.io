<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Git on 향숙의 수첩</title>
        <link>https://ttf248.life/ko/tags/git/</link>
        <description>Recent content in Git on 향숙의 수첩</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>ko</language>
        <lastBuildDate>Sun, 25 May 2025 14:10:37 +0800</lastBuildDate><atom:link href="https://ttf248.life/ko/tags/git/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Git 수정 기록의 커밋 메시지</title>
        <link>https://ttf248.life/ko/p/git-modify-commit-message/</link>
        <pubDate>Wed, 07 May 2025 18:38:31 +0800</pubDate>
        
        <guid>https://ttf248.life/ko/p/git-modify-commit-message/</guid>
        <description>&lt;p&gt;스크립트는 Git 히스토리 커밋의 작성자 정보를 일괄적으로 수정하기 위해 git filter-branch를 사용하여 히스토리 커밋 기록을 재작성합니다&lt;/p&gt;
&lt;p&gt;제공하신 스크립트는 Git 저장소의 과거 커밋에서 작성자 정보를 일괄적으로 수정하는 데 사용되며, 전체적인 아이디어는 올바르지만 &lt;code&gt;git filter-branch&lt;/code&gt;의 &lt;code&gt;--env-filter&lt;/code&gt;에서 배열(예: &lt;code&gt;OLD_EMAILS=(&amp;quot;...&amp;quot;)&lt;/code&gt;)을 사용하는 경우 일부 셸 환경(예: &lt;code&gt;/bin/sh&lt;/code&gt;)이 배열 구문을 지원하지 않아 호환성 문제가 발생할 수 있습니다&lt;/p&gt;
&lt;p&gt;호환성을 높이기 위해 배열을 공백으로 구분된 문자열로 바꾸고, &lt;code&gt;for&lt;/code&gt; 루프를 사용하여 각 기존 이메일 주소를 반복하는 것이 좋습니다. 다음은 수정된 스크립트 예제입니다:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;#!/bin/sh

git filter-branch --env-filter &#39;
OLD_EMAILS=&amp;quot;TianlongXiang51@gmail.com nick@qq.com tianlongxiang51@gmail.com&amp;quot;
CORRECT_NAME=&amp;quot;tianlong.xiang&amp;quot;
CORRECT_EMAIL=&amp;quot;tianlong.xiang@foxmail.com&amp;quot;

for OLD_EMAIL in $OLD_EMAILS
do
    if [ &amp;quot;$GIT_COMMITTER_EMAIL&amp;quot; = &amp;quot;$OLD_EMAIL&amp;quot; ]
    then
        export GIT_COMMITTER_NAME=&amp;quot;$CORRECT_NAME&amp;quot;
        export GIT_COMMITTER_EMAIL=&amp;quot;$CORRECT_EMAIL&amp;quot;
    fi
    if [ &amp;quot;$GIT_AUTHOR_EMAIL&amp;quot; = &amp;quot;$OLD_EMAIL&amp;quot; ]
    then
        export GIT_AUTHOR_NAME=&amp;quot;$CORRECT_NAME&amp;quot;
        export GIT_AUTHOR_EMAIL=&amp;quot;$CORRECT_EMAIL&amp;quot;
    fi
done
&#39; --tag-name-filter cat -- --branches --tags
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;주의사항:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;스크립트를 실행하기 전에 예기치 않은 상황을 방지하기 위해 저장소를 백업하는 것이 좋습니다&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;이 작업은 Git 기록을 덮어쓰고, 커밋 작성자 정보를 수정하여 커밋 해시 값이 변경될 수 있습니다&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;변경 사항을 원격 저장소에 푸시했다면 강제 푸시를 사용해야 합니다&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;git push --force --tags origin &#39;refs/heads/*&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;강제 푸시를 신중하게 사용하고, 특히 여러 사람이 협업하는 프로젝트에서는 다른 사람에게 영향을 미치지 않도록 주의하십시오&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;저장소의 모든 중복되지 않는 작성자 이메일 주소를 확인합니다&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;git log --format=&#39;%an &amp;lt;%ae&amp;gt;&#39; | sort -u
&lt;/code&gt;&lt;/pre&gt;</description>
        </item>
        <item>
        <title>Git 비활성화 http 저장소</title>
        <link>https://ttf248.life/ko/p/git-disable-http-repositories/</link>
        <pubDate>Mon, 08 Jan 2024 21:22:04 +0800</pubDate>
        
        <guid>https://ttf248.life/ko/p/git-disable-http-repositories/</guid>
        <description>&lt;p&gt;소프트웨어 버전을 업데이트하는 것이 습관인데, 어느 버전의 &lt;code&gt;Git&lt;/code&gt;부터인지 모르겠지만 &lt;code&gt;Http&lt;/code&gt; 저장소에서 코드를 가져오지 못하게 금지되어 있습니다&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;fatal: Unencrypted HTTP is not supported for GitLab. Ensure the repository remote URL is using HTTPS
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;배경-소개&#34;&gt;배경 소개
&lt;/h2&gt;&lt;p&gt;환경: Windows 플랫폼, 항상 작은 거북이로 git을 사용하고 있었고, 키 설정도 작은 거북이로 처리했습니다. 전에 스크립트를 통해 한 번 로컬 저장소를 일괄적으로 업데이트한 적이 있습니다.&lt;/p&gt;
&lt;p&gt;이전 링크: [로컬 Git 저장소 일괄 업데이트]({&amp;lt; relref &amp;ldquo;/post/2023/10-19-批量更新本地git仓库&amp;rdquo; &amp;gt;}})&lt;/p&gt;
&lt;p&gt;오늘 집에 와서 코드 업데이트를 하려는데, 위에 언급된 오류가 발생해서 저장소를 정상적으로 업데이트할 수 없게 됐습니다. &lt;code&gt;Git&lt;/code&gt;에서 &lt;code&gt;http&lt;/code&gt; 프로토콜을 사용하여 계속 업데이트하도록 설정하는 옵션이 있을 줄 알았는데, 찾아봐도 해당 설정 항목은 찾을 수가 없었습니다.&lt;/p&gt;
&lt;p&gt;가장 간단한 해결책은 당연히 &lt;code&gt;ssh&lt;/code&gt; 프로토콜로 전환하여 저장소를 업데이트하는 것입니다. 회사 설정상 &lt;code&gt;gitlab&lt;/code&gt;은 단기적으로 &lt;code&gt;https&lt;/code&gt; 프로토콜을 제공하지 않을 예정입니다.&lt;/p&gt;
&lt;h2 id=&#34;미해결-문제&#34;&gt;미해결 문제
&lt;/h2&gt;&lt;p&gt;앞서 작성했던 로컬 저장소 일괄 업데이트 스크립트를 만들 때, 원래는 &lt;code&gt;ssh&lt;/code&gt; 방식으로 저장소를 가져올 생각이었는데, 왜 그런지 자세히 확인하지 않았습니다. TortoiseGit 설정 정보가 config 파일에 동기화되지 않아 명령줄에서 실행&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;git pull #提示没有权限，无法正常更新仓库
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;명령을 통해 키 설정도 확인하는 것은 올바르다: &lt;code&gt;ssh -T git@gitlab.yintech.net&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;TortoiseGit을 사용하여 코드를 정상적으로 가져올 수 있지만 명령줄에서 git pull 명령어를 사용할 때 키가 올바르지 않다고 표시되면 TortoiseGit이 PuTTY의 SSH 키를 사용하는 반면 명령줄은 OpenSSH의 SSH 키를 사용하기 때문일 수 있습니다&lt;/p&gt;
&lt;p&gt;작은 거북이의 키 설정은 시스템 .ssh 폴더에서 키 파일 정보를 읽어오는 대신, 인터페이스 저장소 구성 시 별도로 키 파일 경로를 설정합니다. 유용한 팁: 첫 번째로 구성된 저장소에 키를 설정하면 나머지 저장소는 이 키 파일을 재사용할 수 있습니다. PuTTY가 키를 로드한 후에는 즉시 종료되지 않고 프록시 서비스를 시작합니다.&lt;/p&gt;
&lt;p&gt;전역 구성을 조정하여 시스템 기본 &lt;code&gt;ssh&lt;/code&gt; 설정을 사용하지 않도록 하면 Git Bash가 TortoisePlink를 사용하여 SSH 작업을 수행합니다. 이러한 설정은 TortoiseGit에 포함된 PuTTY 도구를 사용하는 경우에 적합합니다.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;git config --global core.sshCommand &amp;quot;&#39;C:/Program Files/TortoiseGit/bin/TortoisePlink.exe&#39; -batch -ssh&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;위에 설정된 실행 파일 경로를 해당 작은 거북이 경로로 직접 수정하면 시스템 환경 변수에 경로를 추가할 필요가 없습니다&lt;/p&gt;</description>
        </item>
        <item>
        <title>일괄 업데이트된 로컬 Git 저장소 및 기존 권한 문제</title>
        <link>https://ttf248.life/ko/p/bulk-update-local-git-repository-and-legacy-permission-issues/</link>
        <pubDate>Thu, 19 Oct 2023 14:16:22 +0800</pubDate>
        
        <guid>https://ttf248.life/ko/p/bulk-update-local-git-repository-and-legacy-permission-issues/</guid>
        <description>&lt;p&gt;팀 내 프로젝트들 간에는 의존 관계가 존재하며, 과거의 사유로 인해 &lt;code&gt;submodule&lt;/code&gt;을 사용하여 프로젝트 의존성을 관리하지 않았습니다. 따라서 일상적인 개발 과정에서 저장소 코드를 수동으로 순차적으로 업데이트해야 하며, 그렇지 않으면 다양한 이상한 문제가 발생할 수 있습니다.&lt;/p&gt;
&lt;p&gt;온라인 자료를 참고하여 구조가 기본적으로 유사하므로, 로컬에서 &lt;strong&gt;git_list.txt&lt;/strong&gt;라는 저장소 디렉터리를 수동으로 유지하고, 스크립트를 작성하여 디렉터리를 순회하며 한 번에 업데이트합니다. 이후 작업 전에 스크립트를 실행하세요.&lt;/p&gt;
&lt;h2 id=&#34;linux&#34;&gt;linux
&lt;/h2&gt;&lt;p&gt;create new file: batch_pull.sh&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;#!/bin/bash

echo &amp;quot;============ 更新仓库 ===================&amp;quot;

# 检查 git_list.txt 是否存在
if [ ! -f &amp;quot;git_list.txt&amp;quot; ]; then
  echo &amp;quot;git_list.txt 文件不存在！请创建并添加要拉取的 git 仓库 URL。&amp;quot;
  exit 1
else
  echo &amp;quot;============ 检测到了 git 仓库清单文件 ====&amp;quot;
fi

# 逐行读取 git_list.txt 中的 URL，并执行拉取操作
while read -r url; do
  if [ -d &amp;quot;$url&amp;quot; ]; then
    cd &amp;quot;$url&amp;quot; || continue
    git pull
    cd ..
    echo &amp;quot;Pull $url 完成！&amp;quot;
    echo &amp;quot;========================================&amp;quot;
  else
    echo &amp;quot;目录 $url 不存在，跳过拉取。&amp;quot;
  fi
done &amp;lt; &amp;quot;git_list.txt&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;windows&#34;&gt;windows
&lt;/h2&gt;&lt;p&gt;create a new file: batch_pull.bat&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bat&#34;&gt;@echo off
chcp 65001 &amp;gt; nul
rem 进入脚本所在目录
cd /d &amp;quot;%~dp0&amp;quot;

rem 检查 git_list.txt 是否存在
if not exist &amp;quot;git_list.txt&amp;quot; (
  echo git_list.txt 文件不存在！请创建并添加要拉取的 git 仓库 URL。
  exit /b 1
) else (
  echo ============ 检测到了 git 仓库清单文件 ====
)

rem 逐行读取 git_list.txt 中的 URL，并执行拉取操作
for /f %%i in (git_list.txt) do (
  if exist &amp;quot;%%i&amp;quot; (
    pushd &amp;quot;%%i&amp;quot;
    git pull
    popd
    echo Pull %%i 完成！
    echo ========================================
  ) else (
    echo 目录 %%i 不存在，跳过拉取。
  )
)
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;역사적-유산-문제&#34;&gt;역사적 유산 문제
&lt;/h3&gt;&lt;p&gt;시스템 재설치 후 발생한 &lt;code&gt;git&lt;/code&gt; 폴더 권한 파일 관련 오류: &lt;strong&gt;&amp;ldquo;안전하지 않은 저장소 (&amp;rsquo;/home/repon&amp;rsquo;은 다른 사용자가 소유하고 있습니다&amp;rsquo;)&amp;rdquo; 치명적인 오류&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;온라인에서 제안하는 방법들은 대부분 &lt;code&gt;스택 오버플로우&lt;/code&gt;에서 비롯된 것입니다&lt;/p&gt;
&lt;p&gt;저장소 디렉터리에 대한 신뢰 추가: &lt;code&gt;git config --global --add safe.directory /home/repon&lt;/code&gt;
수동으로 &lt;code&gt;.gitconfig&lt;/code&gt; 설정 파일을 수정하여 디렉터리를 추가하고 신뢰하도록 지정합니다&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;[safe]
    directory = /home/repon
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;위의 방법으로 처리한 후, 창고 업데이트는 정상적으로 되었지만, &lt;code&gt;git pull&lt;/code&gt;을 실행할 때마다 콘솔에 많은 경고 메시지가 표시되는데, 사용자 소유권 오류를 나타냅니다&lt;/p&gt;
&lt;h3 id=&#34;데스크톱-컴퓨터-재설치&#34;&gt;데스크톱 컴퓨터 재설치
&lt;/h3&gt;&lt;p&gt;개발한 기계가 너무 오래돼서 시스템을 재설치하지 않았더니, 쓰레기 파일이 폭발해서 방법이 없었습니다. 시간을 내어 시스템을 재설치했는데, 또 이 권한 문제가 발생했습니다. 예전 스크립트가 실행되지 않고, 수정된 권한이 완전하지 않습니다.&lt;/p&gt;
&lt;p&gt;새로운 방식을 사용하면 &lt;code&gt;*&lt;/code&gt;를 직접 추가하면, 이렇게 하면 &lt;code&gt;git&lt;/code&gt;이 모든 디렉터리를 자동으로 신뢰합니다&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;git config --global --add safe.directory &amp;quot;*&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;p&gt;사용자 권한 문제인지, 아니면 다들 &lt;code&gt;windows&lt;/code&gt; 플랫폼에도 &lt;code&gt;chown&lt;/code&gt;과 유사한 명령이 있다는 것에 익숙하지 않은 건지 모르겠다. 폴더 소유자를 수정하는 방법인데, 만약 디렉토리가 많지 않다면 수동으로 소유자를 변경해도 괜찮다. 하지만 이 업무용 컴퓨터에는 도메인 정보가 추가되어 있는데, 회사에서 배포한 도메인에 이상이 있는지, 아니면 로컬 시스템 설정에 문제가 있는 건지 잘 모르겠다. 사용자 목록에서 로그인에 사용되는 사용자를 찾을 수 없었고, 결국 명령줄로 처리했다.&lt;/p&gt;
&lt;p&gt;관리자 권한으로 &lt;code&gt;powershell&lt;/code&gt; 스크립트 &lt;code&gt;change_ower.ps1&lt;/code&gt;을 실행하세요. 스크립트 파일 인코딩을 &lt;code&gt;gbk&lt;/code&gt;로 조정하는 것을 잊지 마세요. 중국어 운영체제에서 그래야 깨짐 없이 실행됩니다.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;# 获取当前用户的用户名
$currentUserName = [System.Security.Principal.WindowsIdentity]::GetCurrent().Name

# 设置 PowerShell 的字符编码为 UTF-8
[Console]::OutputEncoding = [System.Text.Encoding]::UTF8

# 要更改所有者的根目录路径
$rootDirectory = &amp;quot;G:\workspace&amp;quot;  # 替换为实际的目录路径

# 递归遍历目录并更改文件和文件夹的所有者
Get-ChildItem -Path $rootDirectory -Recurse | ForEach-Object {
    $itemPath = $_.FullName

    # 检查是文件还是文件夹
    if ($_ -is [System.IO.DirectoryInfo]) {
        # 如果是文件夹，使用 icacls 更改所有者权限
        $icaclsResult = icacls $itemPath /setowner &amp;quot;$currentUserName&amp;quot; 2&amp;gt;&amp;amp;1
        if ($LASTEXITCODE -eq 0) {
            Write-Host &amp;quot;已更改文件夹 $itemPath 的所有者为 $currentUserName&amp;quot;
        } else {
            Write-Host &amp;quot;无法更改文件夹 $itemPath 的所有者。错误信息: $icaclsResult&amp;quot;
        }
    } else {
        # 如果是文件，使用 icacls 更改所有者权限
        $takeownResult = icacls $itemPath /setowner &amp;quot;$currentUserName&amp;quot; 2&amp;gt;&amp;amp;1
        if ($LASTEXITCODE -eq 0) {
            # Write-Host &amp;quot;已更改文件 $itemPath 的所有者为 $currentUserName&amp;quot;
        } else {
            Write-Host &amp;quot;无法更改文件 $itemPath 的所有者。错误信息: $takeownResult&amp;quot;
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;예상치 못한 상황이 발생했는데, 스크립트 실행 시 출력되는 중국어 정보가 깨져 있었고, 콘솔 문자 인코딩을 설정하고 스크립트 인코딩을 조정했음에도 불구하고 여전히 엉망진창이었다. 머리가 제대로 작동하지 않는 것 같아서, 제어판-지역-언어 설정의 베타 기능을 활성화하고 전역적으로 유니코드 인코딩을 켰더니 스크립트는 정상적으로 실행되었지만 여러 개발 소프트웨어가 제대로 작동하지 않았다. 뒤돌아보니 자료를 정리하다가 스크립트 파일의 인코딩을 &lt;code&gt;gbk&lt;/code&gt;로 설정해야 한다는 것을 기억해냈다.&lt;/p&gt;
&lt;h2 id=&#34;자료&#34;&gt;자료
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ganzhixiong.com/p/f1b9f4fc/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://ganzhixiong.com/p/f1b9f4fc/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/71901632/fatal-error-unsafe-repository-home-repon-is-owned-by-someone-else&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://stackoverflow.com/questions/71901632/fatal-error-unsafe-repository-home-repon-is-owned-by-someone-else&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
        </item>
        <item>
        <title>자주 사용하지 않는 몇 가지 GIT 명령어 모음</title>
        <link>https://ttf248.life/ko/p/git-less-common-commands-summary/</link>
        <pubDate>Fri, 17 Feb 2023 10:08:57 +0800</pubDate>
        
        <guid>https://ttf248.life/ko/p/git-less-common-commands-summary/</guid>
        <description>&lt;p&gt;자주 사용하지는 않지만 매우 유용한 &lt;code&gt;git&lt;/code&gt; 명령어&lt;/p&gt;
&lt;h3 id=&#34;시스템-재설치로-인해-windows-상의-폴더-소유자-정보가-변경되었습니다&#34;&gt;시스템 재설치로 인해 &lt;code&gt;windows&lt;/code&gt; 상의 폴더 소유자 정보가 변경되었습니다
&lt;/h3&gt;&lt;p&gt;새 버전의 &lt;code&gt;git&lt;/code&gt;에서 보안 검증이 추가되어 안전하지 않다는 경고가 발생하여 더 이상 작업을 진행할 수 없습니다&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;git config --global --add safe.directory
git config --global --add safe.directory &amp;quot;*&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;새-컴퓨터에-계정-비밀번호-정보를-저장합니다&#34;&gt;새 컴퓨터에 계정 비밀번호 정보를 저장합니다
&lt;/h3&gt;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;git config --global credential.helper store
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;정보를 업데이트하려면 먼저 기존 증거를 정리하세요&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;git config --system --unset credential.helper
&lt;/code&gt;&lt;/pre&gt;</description>
        </item>
        
    </channel>
</rss>
