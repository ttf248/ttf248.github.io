<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>SqlServer on 향숙의 수첩</title>
        <link>https://ttf248.life/ko/tags/sqlserver/</link>
        <description>Recent content in SqlServer on 향숙의 수첩</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>ko</language>
        <lastBuildDate>Sun, 25 May 2025 14:10:37 +0800</lastBuildDate><atom:link href="https://ttf248.life/ko/tags/sqlserver/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>SQL Server 데이터베이스 디스크 파일 권한 일괄 수정</title>
        <link>https://ttf248.life/ko/p/bulk-modify-sqlserver-database-disk-file-permissions/</link>
        <pubDate>Tue, 23 Jan 2024 19:06:36 +0800</pubDate>
        
        <guid>https://ttf248.life/ko/p/bulk-modify-sqlserver-database-disk-file-permissions/</guid>
        <description>&lt;p&gt;회사 보안 정책 변경으로, &lt;code&gt;메카닉 미니&lt;/code&gt;는 결국 백업 서버로 집으로 이사했고, 시스템을 재설치했습니다. &lt;code&gt;우분투&lt;/code&gt;에서 &lt;code&gt;윈도우 서버&lt;/code&gt;로 전환했는데, 활성화 방법이 정규적이지 않아서, 집에서는 활성화하지 않아도 괜찮은 것 같습니다.&lt;/p&gt;
&lt;p&gt;비정상적인 방식으로 활성화하여 마이크로소프트의 검사를 트리거했습니다(반달 동안 정상적으로 실행됨). 서버는 1시간 동안 켜져 있다가 자동으로 종료되었고, 시스템 로그를 뒤지니 불법 복제본으로 인한 문제였습니다.&lt;/p&gt;
&lt;p&gt;방법이 없네요, 시스템을 다시 설치해야 하고, &lt;code&gt;SqlServer&lt;/code&gt;도 재설치를 해야 합니다. 할 때마다 골치 아픈데, 파일 권한 관리가 엄격해서 데이터베이스를 정상적으로 추가할 수 없습니다.&lt;/p&gt;
&lt;h2 id=&#34;오류-정보&#34;&gt;오류 정보
&lt;/h2&gt;&lt;p&gt;시스템을 재설치한 후, &lt;code&gt;SqlServer&lt;/code&gt;가 데이터베이스를 첨부하는 과정에서 5120 오류 및 운영체제의 액세스 거부 문제가 발생할 수 있습니다&lt;/p&gt;
&lt;h2 id=&#34;스크립트-처리&#34;&gt;스크립트 처리
&lt;/h2&gt;&lt;p&gt;이전 링크: &lt;a class=&#34;link&#34; href=&#34;https://ttf248.life/ko/p/bulk-update-local-git-repository-and-legacy-permission-issues/&#34; &gt;로컬 Git 저장소 일괄 업데이트&lt;/a&gt;, 물론 또 이 익숙한 스크립트입니다. 폴더를 순회하면서 파일의 권한을 수정하도록 변경했는데, 현재는 완전 편집 권한을 가지고 있습니다.&lt;/p&gt;
&lt;p&gt;온라인 튜토리얼은 대부분 수동으로 수정하도록 시키는데, 그들은 겨우 몇 개의 파일만 수정하는 건가? 나는 매번 일괄적으로 파일을 처리해야 하고, 전부 수동으로 하려니 사람이 지쳐 쓰러질 것 같아&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;$currentUserName = [System.Security.Principal.WindowsIdentity]::GetCurrent().Name
[Console]::OutputEncoding = [System.Text.Encoding]::UTF8
$rootDirectory = &amp;quot;D:\data\2013_RujiaInfo&amp;quot;

Get-ChildItem -Path $rootDirectory -Recurse | ForEach-Object {
    $itemPath = $_.FullName

    if ($_ -is [System.IO.DirectoryInfo]) {
        $icaclsResult = icacls $itemPath /setowner &amp;quot;$currentUserName&amp;quot; 2&amp;gt;&amp;amp;1
        if ($LASTEXITCODE -eq 0) {
            Write-Host &amp;quot;已更改文件夹 $itemPath 的所有者为 $currentUserName&amp;quot;
            # 授予当前用户写入权限
            Invoke-Expression &amp;quot;icacls `&amp;quot;$itemPath`&amp;quot; /grant `&amp;quot;$($currentUserName):(OI)(CI)F`&amp;quot;&amp;quot;
            Write-Host &amp;quot;已授予 $currentUserName 编辑文件夹的权限&amp;quot;
        } else {
            Write-Host &amp;quot;无法更改文件夹 $itemPath 的所有者。错误信息: $icaclsResult&amp;quot;
        }
    } else {
        $takeownResult = icacls $itemPath /setowner &amp;quot;$currentUserName&amp;quot; 2&amp;gt;&amp;amp;1
        if ($LASTEXITCODE -eq 0) {
            # 授予当前用户写入权限
            Invoke-Expression &amp;quot;icacls `&amp;quot;$itemPath`&amp;quot; /grant `&amp;quot;$($currentUserName):(F)`&amp;quot;&amp;quot;
            Write-Host &amp;quot;已授予 $currentUserName 编辑文件的权限&amp;quot;
        } else {
            Write-Host &amp;quot;无法更改文件 $itemPath 的所有者。错误信息: $takeownResult&amp;quot;
        }
    }
}

&lt;/code&gt;&lt;/pre&gt;</description>
        </item>
        
    </channel>
</rss>
