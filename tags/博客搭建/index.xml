<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>博客搭建 on 向叔记事簿</title>
        <link>https://ttf248.life/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/</link>
        <description>Recent content in 博客搭建 on 向叔记事簿</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <lastBuildDate>Thu, 29 Jan 2026 21:27:15 +0800</lastBuildDate><atom:link href="https://ttf248.life/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Hugo Module自定义修改主题：思路讲解</title>
        <link>https://ttf248.life/p/hugo-module-customizing-themes-ideas/</link>
        <pubDate>Fri, 15 Nov 2024 22:01:17 +0800</pubDate>
        
        <guid>https://ttf248.life/p/hugo-module-customizing-themes-ideas/</guid>
        <description>&lt;p&gt;翻看历史提交记录，站点切换过很多次主题，每次切换主题都会有一些自定义的修改，这里记录一下自定义修改主题的思路。笔者的&lt;code&gt;Github&lt;/code&gt;也有个仓库，短暂的维护过even主题，后来由于强迫症，非想要升级&lt;code&gt;hugo&lt;/code&gt;编译器到最新版本，导致even主题不兼容，所以又切换到了&lt;code&gt;stack&lt;/code&gt;主题。&lt;/p&gt;
&lt;h2 id=&#34;hugo的模块化&#34;&gt;Hugo的模块化
&lt;/h2&gt;&lt;p&gt;提到模块化，大家可能会想到的是Nginx模块，IDEA插件等等。 通常是我可以通过上传一些模块，来满足我的差异化需求。 之所以大家都喜欢这种模块，主要是因为足够灵活，不用费太大的劲就可以满足自身的需求。 因为很多时候，虽然大体上差不多，但总有一些细节上的差异。 这也正说明软件的复杂度，除了技术上的复杂度，还有业务上的复杂度。 大多数情况下，我们面对的主要是业务复杂度。 这也正是在软件领域，对”隔行如隔山”这句俗语最好的阐述。 如今，不仅互联网行业，金融行业，就算传统的制造业，都已经使用上了信息化系统，来帮助企业的生产和管理。 同样是请假系统，哪怕在同样的行业，不同的公司，都会有所差异。&lt;/p&gt;
&lt;p&gt;而&lt;code&gt;Hugo&lt;/code&gt;的模块和大家印象中的模块有点不一样，并不是以功能为单位，来满足差异化需求。 而是以目录结构为主，来识别相同的结构。&lt;/p&gt;
&lt;p&gt;资料链接：&lt;a class=&#34;link&#34; href=&#34;https://medium.com/@sunwei.xyz/07-hugo%E6%9E%B6%E6%9E%84-hugo%E7%9A%84%E6%A8%A1%E5%9D%97-8ef5a520a822&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;07. Hugo架构 — Hugo的模块&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-toml&#34;&gt;[[imports]]
path = &amp;quot;github.com/CaiJimmy/hugo-theme-stack/v3&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;git submodule&lt;/code&gt; 方式依旧能用，本文不建议使用，如果引入主题的发生了更新，维护起来会比较麻烦，要单独的 git 仓库管理主题。&lt;/p&gt;
&lt;h2 id=&#34;主题的修改逻辑httpsstackjimmycaicomguidemodify-theme&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://stack.jimmycai.com/guide/modify-theme&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;主题的修改逻辑&lt;/a&gt;
&lt;/h2&gt;&lt;p&gt;有了前面模块化的基础概念理解，再来理解自定义主题，就简单那很多了，&lt;code&gt;hugo&lt;/code&gt;现在的主题，也是多个不同的模块组装起来的，我们想要修改其中一个模块，找到对应的模板文件，修改即可。&lt;/p&gt;
&lt;p&gt;摘取自&lt;code&gt;stack&lt;/code&gt;官方文档：&lt;/p&gt;
&lt;p&gt;Using this method, there won&amp;rsquo;t be any file under &lt;code&gt;themes&lt;/code&gt; directory. In order to modify the theme, you will have to copy the file you want to modify to the same directory under &lt;code&gt;layouts&lt;/code&gt; directory.&lt;/p&gt;
&lt;p&gt;For example, in order to modify the &lt;code&gt;themes/hugo-theme-stack/layouts/partials/head/custom.html&lt;/code&gt; file, you will have to copy it to &lt;code&gt;layouts/partials/head/custom.html&lt;/code&gt; and modify it there (copy the code from theme&amp;rsquo;s repository). The same applies to &lt;code&gt;assets&lt;/code&gt; and &lt;code&gt;static&lt;/code&gt; directories。&lt;/p&gt;
&lt;h2 id=&#34;如何找到模板文件&#34;&gt;如何找到模板文件
&lt;/h2&gt;&lt;h3 id=&#34;正统思路&#34;&gt;正统思路
&lt;/h3&gt;&lt;p&gt;翻阅主题的源码文件，理解主题的设计思路，找到对应的模板文件，修改即可。&lt;/p&gt;
&lt;h3 id=&#34;粗暴思路&#34;&gt;粗暴思路
&lt;/h3&gt;&lt;p&gt;笔者并不是很懂前端代码，所以有时候会采用粗暴的方式，比如直接在浏览器中打开对应的页面，找到想要修改的地方，通过&lt;code&gt;审查元素&lt;/code&gt;的方式，定位到&lt;code&gt;css name&lt;/code&gt;，主题源码中搜索，找到对应的文件，复制一份到站点目录，修改即可。&lt;/p&gt;
&lt;h2 id=&#34;小技巧&#34;&gt;小技巧
&lt;/h2&gt;&lt;p&gt;官方默认就提供了一个文件，用于自定义样式，我们需要改造的地方地方，可以通过拆分多个文件，&lt;code&gt;custom.scss&lt;/code&gt; 文件引入我们其他的文件，这样可以更好的管理样式文件。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://ttf248.life/p/hugo-module-customizing-themes-ideas/image.png&#34;
	width=&#34;141&#34;
	height=&#34;375&#34;
	
	loading=&#34;lazy&#34;
	
		alt=&#34;alt text&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;37&#34;
		data-flex-basis=&#34;90px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;汇总修改内容6h&#34;&gt;汇总修改内容(6h)
&lt;/h2&gt;&lt;p&gt;现在已经是&lt;code&gt;AI&lt;/code&gt;编码的元年，详细的内容，这里就不详细贴出来了，只是简单的列举一下，本站点的一些修改内容，比如调整复制按钮的样式，重新设置代码的块的样式，&lt;code&gt;ChatGPT&lt;/code&gt;都是能轻松搞定的。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;整体：全局文字样式，沿用以前 &lt;code&gt;even&lt;/code&gt; 融合 &lt;code&gt;info cn&lt;/code&gt; 的显示风格，中文友好&lt;/li&gt;
&lt;li&gt;首页：右侧导航增加鼠标交互动画&lt;/li&gt;
&lt;li&gt;首页：文章新增摘要预览（耗时颇多，用了取巧的办法实现）&lt;/li&gt;
&lt;li&gt;滚动栏：美化了一下滚动栏的样式&lt;/li&gt;
&lt;li&gt;代码块：引入了 &lt;code&gt;highlight.js&lt;/code&gt; 代码高亮插件，美化代码块样式&lt;/li&gt;
&lt;li&gt;文章详情：部分内容属于转载，新增原作者信息展示，原链接展示&lt;/li&gt;
&lt;li&gt;归档页面：顶部的分类图片，移除主题自带的颜色蒙版，显示原图&lt;/li&gt;
&lt;li&gt;归档页面：新增了按照年份的分类的统计展示面板&lt;/li&gt;
&lt;li&gt;归档页面：两栏显示布局&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;stack&lt;/code&gt; 主题的组件复用率很高，也导致首页文章新增摘要预览耗时颇多，改了对应的组件，文章的详情页面也随之发生了变动，导致正文重复展示内容，&lt;code&gt;golang 模板&lt;/code&gt;的语法也不是很熟悉，所以花费了不少时间，组件之间的参数传递一直没搞定，最后通过取巧的办法，主页单独引入&lt;code&gt;JavaScript&lt;/code&gt;脚本，通过自定义特殊变量，来实现摘要预览。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;有时候代码复用率太高也是个问题，会导致修改一个地方，其他地方也会受到影响，所以在修改主题的时候，一定要注意，不要破坏原有的逻辑。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;评论区&#34;&gt;评论区
&lt;/h3&gt;&lt;p&gt;这哥们的修改更加完善：&lt;a class=&#34;link&#34; href=&#34;https://blog.reincarnatey.net/2024/0719-better-waline/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://blog.reincarnatey.net/2024/0719-better-waline/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;del&gt;本站点简单的启用了 &lt;code&gt;Waline&lt;/code&gt; 评论系统，&lt;code&gt;stack&lt;/code&gt; 主题默认支持 &lt;code&gt;Waline&lt;/code&gt;，只需要在 &lt;code&gt;config.toml&lt;/code&gt; 中配置即可。&lt;/del&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;推荐首页邮箱联系、本站点不开放评论区&lt;/p&gt;
&lt;/blockquote&gt;</description>
        </item>
        <item>
        <title>以为很简单的事情，增加一个代码复制按钮</title>
        <link>https://ttf248.life/p/add-copy-button-for-simple-task/</link>
        <pubDate>Fri, 25 Feb 2022 01:23:39 +0800</pubDate>
        
        <guid>https://ttf248.life/p/add-copy-button-for-simple-task/</guid>
        <description>&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;ouuan&lt;/code&gt; 弄了四个小时，看到这句话的时候，我还觉得搞笑了，怎么可能这么久？最后一看时间：三个小时。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;算是二零二二年开年的第一篇稿子，要搞的东西不复杂，就和标题说的一模一样（此时的我还很年轻），以为照抄 &lt;a class=&#34;link&#34; href=&#34;https://ouuan.github.io/post/from-hexo-to-hugo/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;作业&lt;/a&gt; 就行，放到收藏夹里面，拖拖拉拉等了一个多月，终于想起来这个事情。&lt;/p&gt;
&lt;p&gt;迁移到&lt;code&gt;hugo&lt;/code&gt;的时候一直觉得插件太少了，不能复制代码，导致很多笔记从印象笔记迁移到博客，复制代码的代码的操作就变得繁琐了，严重耽误我水博客的动力。&lt;/p&gt;
&lt;h2 id=&#34;序章&#34;&gt;序章
&lt;/h2&gt;&lt;p&gt;先仔细看看原作者的稿子，通读一遍然后翻翻作者介绍，我靠，碰到个大佬了，清华在读本科生，很早就接触到了计算机，诶，就是皮，先翻翻这个博客再说，完全不记得自己要做什么事情。顺带翻翻作者的&lt;code&gt;Github&lt;/code&gt;仓库，这个修改后的&lt;code&gt;even&lt;/code&gt;主题比现在的好看多了，新功能也多，搞起来，先把相关代码合并到过来。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://ttf248.life/p/add-copy-button-for-simple-task/2022-02-25-02-08-19.png&#34;
	width=&#34;215&#34;
	height=&#34;150&#34;
	
	loading=&#34;lazy&#34;
	
		alt=&#34;1&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;143&#34;
		data-flex-basis=&#34;344px&#34;
	
&gt; &lt;img src=&#34;https://ttf248.life/p/add-copy-button-for-simple-task/2022-02-25-02-08-40.png&#34;
	width=&#34;217&#34;
	height=&#34;167&#34;
	
	loading=&#34;lazy&#34;
	
		alt=&#34;1&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;129&#34;
		data-flex-basis=&#34;311px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;新功能查看文章历史关联递交记录&#34;&gt;新功能：查看文章历史、关联递交记录
&lt;/h3&gt;&lt;p&gt;效果还是不错的，拖到文章末尾就能体验。&lt;/p&gt;
&lt;p&gt;动手前也没太细看作者原仓库的历史记录，以为简单的合并下就好了，最后合并了一堆代码，中间还冲突和N次，无脑覆盖，都是前端和渲染的模板代码，以我要的为准。&lt;/p&gt;
&lt;p&gt;仓库地址：&lt;a class=&#34;link&#34; href=&#34;https://github.com/TianlongXiang/hugo-theme-even&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/TianlongXiang/hugo-theme-even&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;中文的一个坑，&lt;code&gt;git&lt;/code&gt;不调整这个参数，会导致生成的获取不到当前文章的&lt;code&gt;commit hash&lt;/code&gt;，导致历史链接生成失败；生成文章完整历史的时候也需要改改自动集成脚本，记得拉取当前仓库全部的历史记录。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/TianlongXiang/TianlongXiang.github.io/commit/0d860154de9b335ed88a57d62eedd4b6e3ccbeee&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;feat: 尝试拉取完整 github 仓库，用于动态更新文章最后一次改动记录&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/TianlongXiang/TianlongXiang.github.io/commit/1b5d719966737f16a8c67880370dc2722adea0b3&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;chore: 路径存在中文，hugo GitInfo 需要启用此设置&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;name: Build Github
run: git config --global core.quotePath false &amp;amp;&amp;amp; hugo -b &amp;quot;https://www.xiangtianlong.com/&amp;quot; -d &amp;quot;github_public&amp;quot; &amp;amp;&amp;amp; ls
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;样式调整&#34;&gt;样式调整
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;调整站点内容宽度，之前的设计适合移动端和电脑端，实际上也没人手机上看，我自己都是电脑上看&lt;/li&gt;
&lt;li&gt;目录栏支持自动伸缩&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;正文&#34;&gt;正文
&lt;/h2&gt;&lt;p&gt;参考&lt;code&gt;ouuan&lt;/code&gt;的代码记录看了半个多小时，愣是没太看懂怎么增加的复制按钮。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;时光穿梭，一月之后，又想到这事&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;既然这个作业没看懂，换个作业抄，总归能抄明白。搜索出来的结果，还挺让人意外，&lt;code&gt;hugo&lt;/code&gt;官方的论坛里面就有个帖子提到了如何增加复制按钮，跑过去一看，逻辑清晰。懵逼的事情来了，回到的站点一看&lt;code&gt;even&lt;/code&gt;渲染生成的代码块样式和资料中的描述不同，这块就比较啰嗦了，简单记录下。&lt;/p&gt;
&lt;p&gt;由于基本不懂前端开发，不懂的地方就开着浏览器&lt;code&gt;审查元素&lt;/code&gt;，对着代码分析、靠着右边的样式器信息，慢慢也分析懂了逻辑；&lt;code&gt;JavaScript&lt;/code&gt;没看懂，控制台来点日志。不懂的时候很多，静下心，慢慢梳理拆分逻辑，总归能找到思路。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;pre&lt;/code&gt;节点有多个，这里指的是单个代码块，主题自己渲染了一行号出来，导致复制按钮出来两个&lt;/li&gt;
&lt;li&gt;想要关点主题自带的代码高亮渲染，奈何这个主题设置不熟悉&lt;/li&gt;
&lt;li&gt;&lt;code&gt;hugo&lt;/code&gt;官网看资料，看了个半懂，知道有&lt;code&gt;markup&lt;/code&gt;设置能控制代码高亮&lt;/li&gt;
&lt;li&gt;调整配置文件，一直不对劲，渲染出来和预期不同&lt;/li&gt;
&lt;li&gt;发现这堆设置&lt;code&gt;pygmentsOptions&lt;/code&gt;，又继续翻资料，调整设置，先去掉行号&lt;/li&gt;
&lt;li&gt;配置自定义的&lt;code&gt;css&lt;/code&gt;样式表，配置自定义的&lt;code&gt;js&lt;/code&gt;脚本&lt;/li&gt;
&lt;li&gt;既然都搞了这么多事情，脑子突然想到最近看到一个配色图不错，改改按钮的样式：中国风天青色走起&lt;/li&gt;
&lt;/ol&gt;
&lt;img class=&#34;special-img-class&#34; style=&#34;width:20%&#34; src=&#34;2022-02-25-02-01-22.png&#34; /&gt;
&lt;img class=&#34;special-img-class&#34; style=&#34;width:20%&#34; src=&#34;2022-02-25-02-01-33.png&#34; /&gt;
&lt;p&gt;ouuan 弄了四个小时，看到这句话的时候，我还觉得搞笑了，怎么可能这么久？最后一看时间：三个小时。&lt;/p&gt;
&lt;h2 id=&#34;参考链接&#34;&gt;参考链接
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ouuan.github.io/post/from-hexo-to-hugo/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://ouuan.github.io/post/from-hexo-to-hugo/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://gohugobrasil.netlify.app/content-management/syntax-highlighting/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://gohugobrasil.netlify.app/content-management/syntax-highlighting/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://gohugo.io/getting-started/configuration-markup#highlight&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://gohugo.io/getting-started/configuration-markup#highlight&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.dannyguo.com/blog/how-to-add-copy-to-clipboard-buttons-to-code-blocks-in-hugo/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.dannyguo.com/blog/how-to-add-copy-to-clipboard-buttons-to-code-blocks-in-hugo/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
        </item>
        
    </channel>
</rss>
