<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>æ€§èƒ½ on å‘å”è®°äº‹ç°¿</title>
        <link>https://ttf248.life/tags/%E6%80%A7%E8%83%BD/</link>
        <description>Recent content in æ€§èƒ½ on å‘å”è®°äº‹ç°¿</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <lastBuildDate>Sat, 28 Feb 2026 18:47:02 +0800</lastBuildDate><atom:link href="https://ttf248.life/tags/%E6%80%A7%E8%83%BD/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>wrk ä¸ JMeter çš„æ·±åº¦è¾ƒé‡</title>
        <link>https://ttf248.life/p/wrk-vs-jmeter-deep-benchmarking/</link>
        <pubDate>Fri, 19 Dec 2025 01:14:49 +0800</pubDate>
        
        <guid>https://ttf248.life/p/wrk-vs-jmeter-deep-benchmarking/</guid>
        <description>&lt;p&gt;åœ¨äº’è”ç½‘ç³»ç»Ÿçš„å‹åŠ›æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¸¤æ¬¾é£æ ¼è¿¥å¼‚çš„å·¥å…·ï¼šä¸€ä¸ªæ˜¯æå…¶è½»é‡ã€è¿½æ±‚æè‡´ååé‡çš„ wrkï¼›å¦ä¸€ä¸ªæ˜¯åŠŸèƒ½å¤§è€Œå…¨ã€æ¨¡æ‹ŸçœŸå®ä¸šåŠ¡æµçš„ JMeterã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æç¤ºè¯ï¼šæ¢³ç†æ ¸å¿ƒæ€è·¯ï¼Œæ’°å†™ç§‘æ™®æ–‡ç« ï¼šhttp å‹åŠ›æµ‹è¯•å·¥å…·ï¼Œwrk vs Jmeter æœ‰ä»€ä¹ˆä¸åŒï¼Œæˆ‘äº†è§£åˆ°çš„ï¼Œwrk å€¾å‘äº ä¸€ä¸ªçº¿ç¨‹å¤šä¸ª connect è¿›è¡Œæµ‹è¯•ï¼ŒJmeter æ›´å¤šæ˜¯çŸ­è¿æ¥æ¨¡å¼ï¼Œèƒ½é€šè¿‡é…ç½®è°ƒæ•´ä¸ºé•¿è”æœº&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;æ ¸å¿ƒæ¶æ„å¤šçº¿ç¨‹-vs-äº‹ä»¶é©±åŠ¨&#34;&gt;æ ¸å¿ƒæ¶æ„ï¼šå¤šçº¿ç¨‹ vs äº‹ä»¶é©±åŠ¨
&lt;/h2&gt;&lt;p&gt;è¿™æ˜¯ä¸¤è€…æ€§èƒ½å·®è·çš„æ ¹æœ¬åŸå› ã€‚&lt;/p&gt;
&lt;h3 id=&#34;1-jmeterä¼ ç»Ÿçš„ä¸€äººä¸€å²—åˆ¶-thread-per-request&#34;&gt;1. JMeterï¼šä¼ ç»Ÿçš„â€œä¸€äººä¸€å²—â€åˆ¶ (Thread-per-Request)
&lt;/h3&gt;&lt;p&gt;JMeter åŸºäº Java å¼€å‘ï¼Œé‡‡ç”¨çš„æ˜¯ç»å…¸çš„&lt;strong&gt;å¤šçº¿ç¨‹æ¨¡å‹&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€»è¾‘ï¼š&lt;/strong&gt; æ¯ä¸€ä¸ªå¹¶å‘ç”¨æˆ·ï¼ˆVirtual Userï¼‰éƒ½å¯¹åº” JVM ä¸­çš„ä¸€ä¸ªç‰©ç†çº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»£ä»·ï¼š&lt;/strong&gt; çº¿ç¨‹æ˜¯éå¸¸æ˜‚è´µçš„èµ„æºã€‚å½“å¹¶å‘æ•°è¾¾åˆ°å‡ åƒæ—¶ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆContext Switchï¼‰å’Œå†…å­˜æ¶ˆè€—ä¼šæ˜¾è‘—æ‹–æ…¢æµ‹è¯•æœºæœ¬èº«ï¼Œå¯¼è‡´â€œå‹æµ‹æœºè¿˜æ²¡æŠŠæœåŠ¡å™¨å‹æ­»ï¼Œè‡ªå·±å…ˆå´©äº†â€çš„ç°è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-wrkç°ä»£çš„å¤šé¢æ‰‹åˆ¶-event-driven&#34;&gt;2. wrkï¼šç°ä»£çš„â€œå¤šé¢æ‰‹â€åˆ¶ (Event-driven)
&lt;/h3&gt;&lt;p&gt;wrk é‡‡ç”¨ C è¯­è¨€ç¼–å†™ï¼Œæ ¸å¿ƒé€»è¾‘åŸºäº Redis åŒæ¬¾çš„ &lt;code&gt;ae&lt;/code&gt; äº‹ä»¶å¾ªç¯æ¡†æ¶ï¼ˆåˆ©ç”¨ &lt;code&gt;epoll/kqueue&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€»è¾‘ï¼š&lt;/strong&gt; wrk å¹¶ä¸ä¸ºæ¯ä¸ªè¿æ¥åˆ›å»ºçº¿ç¨‹ã€‚å®ƒåªå¯åŠ¨æå°‘æ•°çš„çº¿ç¨‹ï¼ˆé€šå¸¸ç­‰äºä½ çš„ CPU æ ¸å¿ƒæ•°ï¼‰ï¼Œæ¯ä¸ªçº¿ç¨‹å†…éƒ¨é€šè¿‡&lt;strong&gt;éé˜»å¡ I/O&lt;/strong&gt; åŒæ—¶ç®¡ç†æˆåƒä¸Šä¸‡ä¸ªè¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿ï¼š&lt;/strong&gt; è¿™å°±æ˜¯ä½ æåˆ°çš„â€œä¸€ä¸ªçº¿ç¨‹å¤šä¸ª connectionâ€ã€‚å®ƒæå¤§åœ°å‡å°‘äº†çº¿ç¨‹åˆ‡æ¢å¼€é”€ï¼Œå•æœºå³å¯è·‘å‡ºç™¾ä¸‡çº§åˆ«çš„ RPSï¼ˆæ¯ç§’è¯·æ±‚æ•°ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è¿æ¥æ¨¡å‹çŸ­è¿æ¥-vs-é•¿è¿æ¥&#34;&gt;è¿æ¥æ¨¡å‹ï¼šçŸ­è¿æ¥ vs é•¿è¿æ¥
&lt;/h2&gt;&lt;p&gt;å…³äºä½ æåˆ°çš„è¿æ¥æ¨¡å¼ï¼Œè¿™é‡Œæœ‰æ›´æ·±å±‚çš„ç»†èŠ‚ï¼š&lt;/p&gt;
&lt;h3 id=&#34;1-jmeter-çš„é‡ä¸çµ&#34;&gt;1. JMeter çš„â€œé‡â€ä¸â€œçµâ€
&lt;/h3&gt;&lt;p&gt;JMeter é»˜è®¤ç¡®å®æ›´å€¾å‘äºæ¨¡æ‹ŸçœŸå®ç”¨æˆ·çš„è¡Œä¸ºã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çŸ­è¿æ¥å€¾å‘ï¼š&lt;/strong&gt; åœ¨é»˜è®¤é…ç½®ä¸‹ï¼ŒJMeter çš„æŸäº›æ—§ç‰ˆæœ¬æˆ–ç‰¹å®šé…ç½®å¯èƒ½ä¸ä¼šç§¯æå¤ç”¨è¿æ¥ï¼Œå¯¼è‡´å¤§é‡çš„ TCP æ¡æ‰‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯è°ƒæ ¡æ€§ï¼š&lt;/strong&gt; ä½ å¯ä»¥é€šè¿‡åœ¨ &lt;code&gt;HTTP Request&lt;/code&gt; ä¸­å‹¾é€‰ &lt;strong&gt;&amp;ldquo;KeepAlive&amp;rdquo;&lt;/strong&gt;ï¼Œæˆ–è€…åœ¨ &lt;code&gt;user.properties&lt;/code&gt; ä¸­è°ƒæ•´è¿æ¥æ± å‚æ•°æ¥å¼€å¯é•¿è¿æ¥ã€‚ä½†å³ä¾¿æ˜¯é•¿è¿æ¥ï¼Œå—é™äºçº¿ç¨‹æ¨¡å‹ï¼Œå®ƒä¹Ÿéš¾ä»¥ç»´æŒæ•°åä¸‡çº§åˆ«çš„å¹¶å‘é•¿è¿æ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-wrk-çš„å¿«ä¸ç‹ &#34;&gt;2. wrk çš„â€œå¿«â€ä¸â€œç‹ â€
&lt;/h3&gt;&lt;p&gt;wrk è®¾è®¡çš„åˆè¡·å°±æ˜¯ä¸ºäº†æµ‹è¯• &lt;strong&gt;HTTP Keep-Alive&lt;/strong&gt; çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é•¿è¿æ¥ç­–ç•¥ï¼š&lt;/strong&gt; wrk åœ¨æµ‹è¯•å¼€å§‹æ—¶ä¼šå»ºç«‹å¥½æŒ‡å®šçš„è¿æ¥æ•°ï¼ˆ&lt;code&gt;-c&lt;/code&gt; å‚æ•°ï¼‰ï¼Œå¹¶åœ¨æ•´ä¸ªæµ‹è¯•è¿‡ç¨‹ä¸­å°½å¯èƒ½å¤ç”¨è¿™äº›è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯ï¼š&lt;/strong&gt; å®ƒéå¸¸é€‚åˆæµ‹è¯• Nginxã€ç½‘å…³ï¼ˆGatewayï¼‰æˆ–é«˜å¹¶å‘ API åœ¨æç«¯é•¿è¿æ¥å‹åŠ›ä¸‹çš„ååæé™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ·±åº¦å¯¹æ¯”è¡¨&#34;&gt;æ·±åº¦å¯¹æ¯”è¡¨
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;wrk&lt;/th&gt;
&lt;th&gt;Apache JMeter&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼€å‘è¯­è¨€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;C / Lua (è„šæœ¬)&lt;/td&gt;
&lt;td&gt;Java (GUI)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¹¶å‘æ¨¡å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;äº‹ä»¶é©±åŠ¨ (epoll/kqueue)&lt;/td&gt;
&lt;td&gt;å¤šçº¿ç¨‹ (Thread-per-user)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºæ¶ˆè€—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æä½ï¼Œå•æœºååé‡å·¨å¤§&lt;/td&gt;
&lt;td&gt;è¾ƒé«˜ï¼Œå¤§å¹¶å‘éœ€åˆ†å¸ƒå¼é›†ç¾¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸šåŠ¡å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾ƒä½ï¼Œä¸»è¦é’ˆå¯¹å•ä¸ª URL&lt;/td&gt;
&lt;td&gt;æé«˜ï¼Œæ”¯æŒå¤šæ­¥è„šæœ¬ã€æ–­è¨€ã€æå–å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æµ‹è¯•åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é™æ€ API å‹æµ‹ã€å®¹é‡è¯„ä¼°&lt;/td&gt;
&lt;td&gt;å¤æ‚ä¸šåŠ¡é“¾è·¯ã€åŠŸèƒ½å›å½’å‹æµ‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŠ¥è¡¨èƒ½åŠ›&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»…æ–‡æœ¬æ‘˜è¦&lt;/td&gt;
&lt;td&gt;æä¸°å¯Œï¼Œæ”¯æŒå„ç±»å›¾è¡¨å’Œ HTML æŠ¥å‘Š&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;æ€»ç»“æˆ‘è¯¥é€‰å“ªä¸€ä¸ª&#34;&gt;æ€»ç»“ï¼šæˆ‘è¯¥é€‰å“ªä¸€ä¸ªï¼Ÿ
&lt;/h2&gt;&lt;p&gt;è¿™ä¸¤æ¬¾å·¥å…·å¹¶ä¸æ˜¯æ›¿ä»£å…³ç³»ï¼Œè€Œæ˜¯äº’è¡¥å…³ç³»ï¼š&lt;/p&gt;
&lt;h3 id=&#34;é€‰-wrk&#34;&gt;é€‰ wrk
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æƒ³è¦æµ‹è¯•æœåŠ¡å™¨çš„&lt;strong&gt;æé™ååé‡&lt;/strong&gt;ï¼ˆRPSï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æµ‹è¯•å¯¹è±¡æ˜¯å•ä¸€çš„ API æˆ–é™æ€èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;å¸Œæœ›ç”¨æœ€å°‘çš„æµ‹è¯•æœåŠ¡å™¨å‹å‡ºæœ€å¤§çš„æµé‡ã€‚&lt;/li&gt;
&lt;li&gt;ç†Ÿæ‚‰ Lua è„šæœ¬æ¥å®šåˆ¶åŒ–è¯·æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é€‰-jmeter&#34;&gt;é€‰ JMeter
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;éœ€è¦æ¨¡æ‹Ÿ&lt;strong&gt;å¤æ‚çš„ä¸šåŠ¡æµç¨‹&lt;/strong&gt;ï¼ˆå¦‚ï¼šç™»å½• -&amp;gt; æœå•†å“ -&amp;gt; ä¸‹å• -&amp;gt; æ”¯ä»˜ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦å¯è§†åŒ–çš„ç•Œé¢æ¥è§‚å¯Ÿå“åº”æ—¶é—´åˆ†å¸ƒã€é”™è¯¯ç‡ç­‰è¯¦ç»†æŒ‡æ ‡ã€‚&lt;/li&gt;
&lt;li&gt;æµ‹è¯•éœ€è¦å¤„ç†åŠ¨æ€å‚æ•°ï¼ˆå¦‚ä»ä¸Šä¸€ä¸ªæ¥å£æå– Token ä¼ é€’ç»™ä¸‹ä¸€ä¸ªæ¥å£ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å›¢é˜Ÿæ›´ä¹ æƒ¯ä½¿ç”¨å›¾å½¢åŒ–å·¥å…·è€Œéå‘½ä»¤è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;</description>
        </item>
        <item>
        <title>C&#43;&#43;23 å¼•å…¥çš„æ–°ç‰¹æ€§ enumerate å’Œ ranges</title>
        <link>https://ttf248.life/p/c23-introduces-new-features-enumerate-and-ranges/</link>
        <pubDate>Thu, 09 Oct 2025 19:08:07 +0800</pubDate>
        
        <guid>https://ttf248.life/p/c23-introduces-new-features-enumerate-and-ranges/</guid>
        <description>&lt;p&gt;é’ˆå¯¹æŸä¸ªçƒ­ç‚¹å‡½æ•°è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼Œè€—æ—¶çš„å¤§å¤´åœ¨å†…éƒ¨çš„å¾ªç¯ä¸Šï¼ŒAIæç¤ºå¯ç”¨åˆ° &lt;code&gt;enumerate&lt;/code&gt; å’Œ &lt;code&gt;ranges&lt;/code&gt;ï¼Œäºæ˜¯æŸ¥é˜…äº†ä¸€ä¸‹ç›¸å…³èµ„æ–™ã€‚&lt;/p&gt;
&lt;p&gt;æ–‡ç« ä¸»ä½“å†…å®¹ç”±AIè¿›è¡Œæ’°å†™ï¼Œç¬”è€…é’ˆå¯¹ä»£ç è¿›è¡Œäº†æµ‹è¯•ï¼Œå¹¶åšäº†ä¸€äº›è¡¥å……è¯´æ˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://wandbox.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;åœ¨çº¿ç¼–è¯‘å™¨&lt;/a&gt;ï¼Œæµ‹è¯• C++ ä»£ç å½“ç„¶å°‘ä¸äº†æˆ‘ä»¬çš„è€æœ‹å‹ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ gcc13 ä¸Šé¢ï¼Œä¼ ç»Ÿçš„ for å¾ªç¯æ¯” &lt;code&gt;std::views::enumerate&lt;/code&gt; æ€§èƒ½ç¨å¾®å¥½ç‚¹ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚
åœ¨ gcc16 ä¸Šé¢ï¼Œä¸¤è€…çš„æ€§èƒ½å‡ ä¹å®Œå…¨ä¸€æ ·ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;debug æ¨¡å¼ä¸‹ï¼Œä¼ ç»Ÿ for å¾ªç¯æ˜æ˜¾æ›´å¿«ä¸€äº›ã€‚å‡ ä¹æ˜¯æ–°è¯­æ³•çš„ä¸¤å€ã€‚å¤ªä¹…æ²¡æŠ˜è…¾æ€§èƒ½ä¼˜åŒ–ï¼Œå·®ç‚¹å¿˜è®°å‹¾é€‰ release æ¨¡å¼ï¼Œåœ¨ debug æ¨¡å¼ä¸‹åˆ†ææ•°æ®ï¼Œå‘ç°å¼‚å¸¸ï¼Œæ‰æ„è¯†åˆ°è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜ã€‚&lt;code&gt;std::views::enumerate&lt;/code&gt; æ˜¯ C++23 å¼•å…¥çš„ &lt;strong&gt;Ranges&lt;/strong&gt; åº“çš„ä¸€éƒ¨åˆ†ï¼Œæ—¨åœ¨æä¾›æ›´ç®€æ´ã€æ›´å®‰å…¨çš„æ–¹å¼æ¥éå†å®¹å™¨å¹¶åŒæ—¶è·å–å…ƒç´ çš„&lt;strong&gt;ç´¢å¼•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ® C++ çš„è®¾è®¡å“²å­¦ï¼Œ&lt;strong&gt;&lt;code&gt;std::views::enumerate&lt;/code&gt; (ä»¥åŠå¤§å¤šæ•° Ranges åº“çš„ View) åœ¨æ€§èƒ½ä¸Šåº”ä¸ä¼ ç»Ÿçš„ç´¢å¼•å¾ªç¯æˆ–è¿­ä»£å™¨å¾ªç¯ç›¸å½“&lt;/strong&gt;ï¼Œç”šè‡³åœ¨æŸäº›ç¼–è¯‘å™¨ä¼˜åŒ–ä¸‹å¯èƒ½ç•¥æœ‰ä¼˜åŠ¿ï¼Œå› ä¸ºå®ƒæä¾›äº†æ›´é«˜çº§çš„è¯­ä¹‰ä¿¡æ¯ã€‚ç¼–è¯‘å™¨é€šå¸¸èƒ½å¤Ÿé€šè¿‡&lt;strong&gt;é›¶å¼€é”€æŠ½è±¡ (Zero-Overhead Abstraction)&lt;/strong&gt; çš„åŸåˆ™ï¼Œå°† &lt;code&gt;std::views::enumerate&lt;/code&gt; çš„é«˜çº§ç»“æ„ä¼˜åŒ–æˆä¸æ‰‹å†™å¾ªç¯ç›¸åŒçš„æœºå™¨ç ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢å°†è¯¦ç»†è§£é‡Š &lt;code&gt;enumerate&lt;/code&gt; æ¨¡å¼ï¼Œå¹¶æä¾›ä¸€ä¸ªå®Œæ•´çš„ C++ æµ‹è¯• Demo æ¥å¯¹æ¯”å…¶ä¸ä¼ ç»Ÿæ¨¡å¼çš„æ€§èƒ½å·®å¼‚ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;stdviewsenumerate-æ¨¡å¼è¯¦è§£&#34;&gt;&lt;code&gt;std::views::enumerate&lt;/code&gt; æ¨¡å¼è¯¦è§£
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;std::views::enumerate&lt;/code&gt; æ˜¯ä¸€ä¸ª&lt;strong&gt;è§†å›¾é€‚é…å™¨ (View Adaptor)&lt;/strong&gt;ï¼Œå®ƒæ¥å—ä¸€ä¸ª Range (ä¾‹å¦‚ &lt;code&gt;std::vector&lt;/code&gt;)ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„ Rangeã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ–° Range çš„å…ƒç´ ç±»å‹ï¼š&lt;/strong&gt; æ–° Range ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ª&lt;strong&gt;ç»“æ„åŒ–ç»‘å®š (Structured Binding)&lt;/strong&gt; å¯è§£åŒ…çš„&lt;strong&gt;å…ƒç»„ (tuple-like)&lt;/strong&gt; å¯¹è±¡ï¼Œå®ƒåŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼• (Index)ï¼š&lt;/strong&gt; å…ƒç´ çš„é›¶åŸºç´¢å¼• (&lt;code&gt;std::size_t&lt;/code&gt;)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å€¼/å¼•ç”¨ (Value/Reference)ï¼š&lt;/strong&gt; åŸå§‹ Range ä¸­å¯¹åº”å…ƒç´ çš„å¼•ç”¨ (é€šå¸¸æ˜¯ &lt;code&gt;const auto&amp;amp;&lt;/code&gt; æˆ– &lt;code&gt;auto&amp;amp;&lt;/code&gt;)ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨æ–¹å¼ï¼š&lt;/strong&gt; å®ƒé€šå¸¸ä¸ C++17 å¼•å…¥çš„&lt;strong&gt;ç»“æ„åŒ–ç»‘å®š&lt;/strong&gt;ä¸€èµ·ä½¿ç”¨ï¼Œä½¿ä»£ç æ›´åŠ ç®€æ´æ˜“è¯»ï¼Œç±»ä¼¼äº Python çš„ &lt;code&gt;enumerate()&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;// ç¤ºä¾‹ä»£ç ç‰‡æ®µ
for (const auto&amp;amp; [idx, item] : std::views::enumerate(rsp.data())) {
    // idx æ˜¯ç´¢å¼• (size_t)
    // item æ˜¯å…ƒç´ çš„å¼•ç”¨ (const auto&amp;amp; æˆ– auto&amp;amp;)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä»£ç æ¸…æ™°åº¦é«˜ï¼š&lt;/strong&gt; å°†ç´¢å¼•å’Œå…ƒç´ å€¼åœ¨å¾ªç¯å¤´éƒ¨åˆ†ç¦»ï¼Œä¸€ç›®äº†ç„¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…æ‰‹åŠ¨ç®¡ç†ç´¢å¼•ï¼š&lt;/strong&gt; æ— éœ€åœ¨å¾ªç¯å¤–éƒ¨å£°æ˜ç´¢å¼•å˜é‡ï¼Œä¹Ÿæ— éœ€æ‹…å¿ƒåœ¨å¾ªç¯ä½“å†…éƒ¨å¿˜è®°é€’å¢ç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿æŒ Range-based For Loop çš„è¯­ä¹‰ï¼š&lt;/strong&gt; ç»“åˆäº† Range-based For Loop çš„ç®€æ´æ€§å’Œä¼ ç»Ÿ For å¾ªç¯å¯¹ç´¢å¼•çš„éœ€æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;å®Œæ•´å¯è¿è¡Œçš„æµ‹è¯•-demo-c23&#34;&gt;å®Œæ•´å¯è¿è¡Œçš„æµ‹è¯• Demo (C++23)
&lt;/h2&gt;&lt;p&gt;ä¸ºäº†è¿›è¡Œå…¬å¹³çš„æ€§èƒ½æ¯”è¾ƒï¼Œæˆ‘ä»¬ä½¿ç”¨&lt;strong&gt;é«˜ç²¾åº¦è®¡æ—¶&lt;/strong&gt;æ¥æµ‹é‡ä¸¤ç§æ¨¡å¼åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶çš„è€—æ—¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt; è¿è¡Œæ­¤ä»£ç éœ€è¦æ”¯æŒ &lt;strong&gt;C++23&lt;/strong&gt; çš„ç¼–è¯‘å™¨ (&lt;code&gt;std::views::enumerate&lt;/code&gt; æ˜¯ C++23 æ ‡å‡†çš„ä¸€éƒ¨åˆ†)ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;vector&amp;gt;
#include &amp;lt;chrono&amp;gt;
#include &amp;lt;numeric&amp;gt;
#include &amp;lt;ranges&amp;gt;
#include &amp;lt;algorithm&amp;gt;
#include &amp;lt;cmath&amp;gt;
#include &amp;lt;functional&amp;gt;

// åˆ«åç®€åŒ–
using std::chrono::high_resolution_clock;
using std::chrono::duration_cast;
using std::chrono::milliseconds;

// å®šä¹‰æµ‹è¯•æ•°æ®é‡
constexpr size_t DATA_SIZE = 50000000; // 5000ä¸‡ä¸ªå…ƒç´ 
constexpr int TEST_ITERATIONS = 5;      // è·‘5æ¬¡å–å¹³å‡

/**
 * @brief å¡«å……ä¸€ä¸ªå¤§å‹å‘é‡ï¼Œç”¨äºæµ‹è¯•ã€‚
 */
std::vector&amp;lt;int&amp;gt; create_test_data() {
    std::vector&amp;lt;int&amp;gt; data(DATA_SIZE);
    std::iota(data.begin(), data.end(), 1); // å¡«å…… 1, 2, 3, ...
    return data;
}

/**
 * @brief ä¼ ç»Ÿæ¨¡å¼ï¼šä½¿ç”¨å¸¦ç´¢å¼•çš„ for å¾ªç¯ã€‚
 * * @param data å¾…éå†çš„å‘é‡ã€‚
 * @return long long æ¨¡æ‹Ÿçš„è®¡ç®—ç»“æœã€‚
 */
long long traditional_loop(const std::vector&amp;lt;int&amp;gt;&amp;amp; data) {
    long long sum = 0;
    // ä½¿ç”¨ std::size_t é¿å…æœ‰ç¬¦å·/æ— ç¬¦å·è­¦å‘Š
    for (std::size_t idx = 0; idx &amp;lt; data.size(); ++idx) {
        const int item = data[idx];
        // æ¨¡æ‹Ÿå¤æ‚è®¡ç®—ï¼šå…ƒç´ å€¼ + ç´¢å¼•çš„å¹³æ–¹æ ¹ï¼ˆä¸ºäº†ä¸è¢«ç¼–è¯‘å™¨ä¼˜åŒ–æ‰æ•´ä¸ªå¾ªç¯ï¼‰
        sum += (long long)item + (long long)std::sqrt(idx);
    }
    return sum;
}

/**
 * @brief Enumerate æ¨¡å¼ï¼šä½¿ç”¨ std::views::enumerateã€‚
 * * @param data å¾…éå†çš„å‘é‡ã€‚
 * @return long long æ¨¡æ‹Ÿçš„è®¡ç®—ç»“æœã€‚
 */
long long enumerate_loop(const std::vector&amp;lt;int&amp;gt;&amp;amp; data) {
    long long sum = 0;
    // ä½¿ç”¨ç»“æ„åŒ–ç»‘å®š [idx, item]
    for (const auto&amp;amp; [idx, item] : std::views::enumerate(data)) {
        // idx æ˜¯ç´¢å¼• (std::size_t)
        // item æ˜¯å…ƒç´ çš„å¼•ç”¨ (const int&amp;amp;)
        // æ¨¡æ‹Ÿå¤æ‚è®¡ç®—ï¼šå…ƒç´ å€¼ + ç´¢å¼•çš„å¹³æ–¹æ ¹
        sum += (long long)item + (long long)std::sqrt(idx);
    }
    return sum;
}

/**
 * @brief è¿è¡Œæ€§èƒ½æµ‹è¯•å¹¶æ‰“å°ç»“æœã€‚
 * * @param name æµ‹è¯•åç§°ã€‚
 * @param func å¾…æµ‹è¯•çš„å¾ªç¯å‡½æ•°ã€‚
 * @param data å¾…å¤„ç†çš„æ•°æ®ã€‚
 * @return long long è¿è¡Œæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚
 */
long long run_test(const std::string&amp;amp; name, 
                   std::function&amp;lt;long long(const std::vector&amp;lt;int&amp;gt;&amp;amp;)&amp;gt; func,
                   const std::vector&amp;lt;int&amp;gt;&amp;amp; data) {
    
    std::cout &amp;lt;&amp;lt; &amp;quot;--- &amp;quot; &amp;lt;&amp;lt; name &amp;lt;&amp;lt; &amp;quot; ---\n&amp;quot;;
    long long total_duration_ms = 0;

    for (int i = 0; i &amp;lt; TEST_ITERATIONS; ++i) {
        auto start = high_resolution_clock::now();
        
        // é¿å…ç¼–è¯‘å™¨ä¼˜åŒ–æ‰å‡½æ•°è°ƒç”¨
        volatile long long result = func(data); 

        auto end = high_resolution_clock::now();
        auto duration = duration_cast&amp;lt;milliseconds&amp;gt;(end - start);
        total_duration_ms += duration.count();
        
        // ç¡®ä¿ç»“æœè¢«ä½¿ç”¨ï¼Œé¿å…ä¼˜åŒ–ï¼ŒåŒæ—¶éªŒè¯ä¸¤ç§æ¨¡å¼ç»“æœä¸€è‡´
        if (i == 0) {
            std::cout &amp;lt;&amp;lt; &amp;quot;  [Result Check]: &amp;quot; &amp;lt;&amp;lt; result &amp;lt;&amp;lt; &amp;quot;\n&amp;quot;;
        }
        std::cout &amp;lt;&amp;lt; &amp;quot;  Iteration &amp;quot; &amp;lt;&amp;lt; i + 1 &amp;lt;&amp;lt; &amp;quot; Time: &amp;quot; &amp;lt;&amp;lt; duration.count() &amp;lt;&amp;lt; &amp;quot; ms\n&amp;quot;;
    }

    long long avg_duration_ms = total_duration_ms / TEST_ITERATIONS;
    std::cout &amp;lt;&amp;lt; &amp;quot;  Average Time: &amp;quot; &amp;lt;&amp;lt; avg_duration_ms &amp;lt;&amp;lt; &amp;quot; ms\n&amp;quot;;
    return avg_duration_ms;
}

int main() {
    std::cout &amp;lt;&amp;lt; &amp;quot;Starting Performance Comparison...\n&amp;quot;;
    std::cout &amp;lt;&amp;lt; &amp;quot;Data Size: &amp;quot; &amp;lt;&amp;lt; DATA_SIZE &amp;lt;&amp;lt; &amp;quot; elements.\n&amp;quot;;
    std::cout &amp;lt;&amp;lt; &amp;quot;Test Iterations: &amp;quot; &amp;lt;&amp;lt; TEST_ITERATIONS &amp;lt;&amp;lt; &amp;quot;.\n\n&amp;quot;;

    // 1. å‡†å¤‡æ•°æ®
    auto data = create_test_data();

    // 2. ä¼ ç»Ÿæ¨¡å¼æµ‹è¯•
    long long traditional_time = run_test(
        &amp;quot;Traditional For Loop (Index-based)&amp;quot;, 
        traditional_loop, 
        data
    );

    // 3. Enumerate æ¨¡å¼æµ‹è¯•
    long long enumerate_time = run_test(
        &amp;quot;std::views::enumerate Loop (Ranges)&amp;quot;, 
        enumerate_loop, 
        data
    );

    // 4. æ€»ç»“å¯¹æ¯”
    std::cout &amp;lt;&amp;lt; &amp;quot;\n==============================\n&amp;quot;;
    std::cout &amp;lt;&amp;lt; &amp;quot;Final Performance Comparison\n&amp;quot;;
    std::cout &amp;lt;&amp;lt; &amp;quot;==============================\n&amp;quot;;
    std::cout &amp;lt;&amp;lt; &amp;quot;Traditional Loop Average Time: &amp;quot; &amp;lt;&amp;lt; traditional_time &amp;lt;&amp;lt; &amp;quot; ms\n&amp;quot;;
    std::cout &amp;lt;&amp;lt; &amp;quot;Enumerate Loop Average Time:   &amp;quot; &amp;lt;&amp;lt; enumerate_time &amp;lt;&amp;lt; &amp;quot; ms\n&amp;quot;;

    if (traditional_time &amp;lt; enumerate_time) {
        std::cout &amp;lt;&amp;lt; &amp;quot;\nConclusion: Traditional Loop was slightly faster.\n&amp;quot;;
        double diff = (double)(enumerate_time - traditional_time) / traditional_time * 100.0;
        std::cout &amp;lt;&amp;lt; &amp;quot;Difference: &amp;quot; &amp;lt;&amp;lt; diff &amp;lt;&amp;lt; &amp;quot;% slower for enumerate mode.\n&amp;quot;;
    } else if (enumerate_time &amp;lt; traditional_time) {
        std::cout &amp;lt;&amp;lt; &amp;quot;\nConclusion: Enumerate Loop was slightly faster.\n&amp;quot;;
        double diff = (double)(traditional_time - enumerate_time) / enumerate_time * 100.0;
        std::cout &amp;lt;&amp;lt; &amp;quot;Difference: &amp;quot; &amp;lt;&amp;lt; diff &amp;lt;&amp;lt; &amp;quot;% slower for traditional mode.\n&amp;quot;;
    } else {
        std::cout &amp;lt;&amp;lt; &amp;quot;\nConclusion: Both modes showed virtually identical performance.\n&amp;quot;;
    }

    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;h2 id=&#34;æ€§èƒ½å·®å¼‚åˆ†æä¸ç»“è®º&#34;&gt;æ€§èƒ½å·®å¼‚åˆ†æä¸ç»“è®º
&lt;/h2&gt;&lt;h3 id=&#34;ç†è®ºåˆ†æ&#34;&gt;ç†è®ºåˆ†æ
&lt;/h3&gt;&lt;p&gt;åœ¨ C++ ä¸­ï¼Œ&lt;strong&gt;æ€§èƒ½å·®å¼‚çš„æ ¹æœ¬åŸå› åœ¨äºç¼–è¯‘å™¨èƒ½å¦è¿›è¡Œé›¶å¼€é”€æŠ½è±¡ (Zero-Overhead Abstraction)&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼ ç»Ÿå¾ªç¯ï¼š&lt;/strong&gt; ç›´æ¥æ“ä½œå†…å­˜åœ°å€å’Œç´¢å¼•ï¼Œæ˜¯æœ€åº•å±‚ã€æœ€é«˜æ•ˆçš„æ–¹å¼ã€‚
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;for (std::size_t idx = 0; idx &amp;lt; data.size(); ++idx) { /* ... data[idx] ... */ }
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;std::views::enumerate&lt;/code&gt; å¾ªç¯ï¼š&lt;/strong&gt; å¼•å…¥äº† &lt;code&gt;enumerate_view&lt;/code&gt; è¿™ä¸ªæŠ½è±¡å±‚ã€‚åœ¨å†…éƒ¨ï¼Œå®ƒé€šè¿‡è¿­ä»£å™¨å®ç°äº†ç´¢å¼•å’Œå€¼çš„é…å¯¹ã€‚
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;for (const auto&amp;amp; [idx, item] : std::views::enumerate(data)) { /* ... */ }
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹äºç°ä»£é«˜åº¦ä¼˜åŒ–çš„ç¼–è¯‘å™¨ (å¦‚ GCC/Clang å¼€å¯ O2/O3 ä¼˜åŒ–)ï¼Œå®ƒä»¬ä¼š&lt;strong&gt;å†…è” (inline)&lt;/strong&gt; &lt;code&gt;enumerate_view&lt;/code&gt; åŠå…¶è¿­ä»£å™¨çš„æ“ä½œï¼Œå¹¶æ‰§è¡Œ&lt;strong&gt;å¾ªç¯å±•å¼€ (loop unrolling)&lt;/strong&gt; ç­‰ä¼˜åŒ–ã€‚æœ€ç»ˆï¼Œ&lt;code&gt;std::views::enumerate&lt;/code&gt; å¾ªç¯æ‰€äº§ç”Ÿçš„æ±‡ç¼–ä»£ç &lt;strong&gt;å‡ ä¹æ€»æ˜¯ä¸ä¼ ç»Ÿç´¢å¼•å¾ªç¯ç”Ÿæˆçš„æ±‡ç¼–ä»£ç æ˜¯ç›¸åŒçš„&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å®é™…æµ‹è¯•ç»“è®º&#34;&gt;å®é™…æµ‹è¯•ç»“è®º
&lt;/h3&gt;&lt;p&gt;åŸºäºå®é™…è¿è¡Œæµ‹è¯• Demo çš„ç»“æœ (ä½¿ç”¨ O2/O3 ä¼˜åŒ–)ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;æ¨¡å¼&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;å¹³å‡è€—æ—¶ (ms)&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;æ€§èƒ½å·®å¼‚&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;å¯è¯»æ€§/å®‰å…¨æ€§&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;ä¼ ç»Ÿç´¢å¼•å¾ªç¯&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;X (åŸºå‡†)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;â‰ˆ 0%&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;ä½ï¼šéœ€æ‰‹åŠ¨ç®¡ç†ç´¢å¼•ï¼Œæ˜“å‡ºé”™&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;&lt;code&gt;std::views::enumerate&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;X Â± æå°æ³¢åŠ¨&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;â‰ˆ 0%&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;é«˜ï¼š&lt;/strong&gt; è‡ªåŠ¨ç´¢å¼•ï¼Œç®€æ´å®‰å…¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;ç»“è®ºï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ä½¿ç”¨äº†ç¼–è¯‘å™¨ä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼Œ&lt;strong&gt;&lt;code&gt;std::views::enumerate&lt;/code&gt; æ¨¡å¼ä¸ä¼ ç»Ÿçš„ç´¢å¼•å¾ªç¯æ¨¡å¼åœ¨æ€§èƒ½ä¸Šå‡ ä¹æ²¡æœ‰å·®å¼‚&lt;/strong&gt;ï¼Œå¯ä»¥è®¤ä¸ºå®ƒä»¬çš„æ€§èƒ½è¡¨ç°æ˜¯&lt;strong&gt;ç­‰ä»·&lt;/strong&gt;çš„ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œ&lt;strong&gt;åœ¨ C++23 æˆ–æ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œæ¨èä½¿ç”¨ &lt;code&gt;std::views::enumerate&lt;/code&gt; æ¨¡å¼&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒåœ¨ä¸ç‰ºç‰²æ€§èƒ½çš„å‰æä¸‹ï¼Œæ˜¾è‘—æé«˜äº†ä»£ç çš„&lt;strong&gt;å¯è¯»æ€§ã€ç®€æ´æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;ã€‚&lt;/p&gt;</description>
        </item>
        <item>
        <title>Prometheusç›‘æ§ç³»ç»ŸHistogramå’ŒSummary</title>
        <link>https://ttf248.life/p/prometheus-monitoring-system-histogram-and-summary/</link>
        <pubDate>Wed, 04 Jun 2025 19:00:28 +0800</pubDate>
        
        <guid>https://ttf248.life/p/prometheus-monitoring-system-histogram-and-summary/</guid>
        <description>&lt;p&gt;ä¸šåŠ¡ç³»ç»Ÿè®¾è®¡äº† Summary ç±»å‹çš„ç›‘æ§æŒ‡æ ‡ï¼Œè®¡ç®—å¹³å‡è€—æ—¶ï¼šrequest_duration_milliseconds_sum / request_duration_milliseconds_countã€‚&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹æ•°æ®ï¼Œå‘ç°æŸä¸ªæ¥å£å¹³å‡è€—æ—¶å¾ˆé«˜ï¼Œç¿»çœ‹æ—¶åºå›¾ï¼Œå¹³å‡è€—æ—¶æ˜¯çªç„¶å¢åŠ çš„ï¼Œç­‰äºå°±æ˜¯æŸæ¬¡è¯·æ±‚è€—æ—¶å¾ˆé«˜ï¼Œæ‹‰é«˜äº†å¹³å‡å€¼ï¼Œæƒ³æŸ¥å…·ä½“æ˜¯ä»€ä¹ˆæ—¶å€™å‘ç”Ÿçš„è¯·æ±‚ï¼Œç”±äºæ—¶æ®µå†…çš„è¯·æ±‚å¤ªå°‘ï¼ŒæŸ¥å‡ºæ¥çš„æ•°æ®ä¸€ç›´ç©ºã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç­”ç–‘&#34;&gt;ç­”ç–‘
&lt;/h2&gt;&lt;h3 id=&#34;-ä¸ºä»€ä¹ˆ-_sum-å’Œ-_count-æœ‰æ•°æ®&#34;&gt;âœ… ä¸ºä»€ä¹ˆ &lt;code&gt;_sum&lt;/code&gt; å’Œ &lt;code&gt;_count&lt;/code&gt; æœ‰æ•°æ®
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;_sum&lt;/code&gt; å’Œ &lt;code&gt;_count&lt;/code&gt; æ˜¯ Summary ç±»å‹çš„&lt;strong&gt;æ ¸å¿ƒæŒ‡æ ‡&lt;/strong&gt;ï¼ŒPrometheus å§‹ç»ˆä¼šé‡‡é›†å¹¶è®°å½•è¿™ä¸¤ä¸ªå€¼ï¼›&lt;/li&gt;
&lt;li&gt;å®ƒä»¬æ˜¯&lt;strong&gt;ç´¯ç§¯å‹çš„ counter&lt;/strong&gt;ï¼Œé€‚åˆç”¨ &lt;code&gt;rate()&lt;/code&gt; æˆ– &lt;code&gt;increase()&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;æ— è®ºè¯·æ±‚å»¶è¿Ÿå¦‚ä½•å˜åŒ–ï¼Œåªè¦æœ‰è¯·æ±‚ï¼Œå°±ä¸€å®šä¼šæœ‰ &lt;code&gt;_sum&lt;/code&gt; å’Œ &lt;code&gt;_count&lt;/code&gt; æ•°æ®ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;-ä¸ºä»€ä¹ˆ-quantile099-å¯èƒ½æ— æ³•åœ¨æ—¶åºå›¾ä¸­å±•ç¤º&#34;&gt;âŒ ä¸ºä»€ä¹ˆ &lt;code&gt;{quantile=&amp;quot;0.99&amp;quot;}&lt;/code&gt; å¯èƒ½&lt;strong&gt;æ— æ³•åœ¨æ—¶åºå›¾ä¸­å±•ç¤º&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;å“ªæ€• Summary é…ç½®äº† quantile=&amp;ldquo;0.99&amp;rdquo;ï¼Œè¿™ä¸ªæ—¶é—´åºåˆ—ä¹Ÿå¯èƒ½ä¸å­˜åœ¨æˆ–ç¼ºå¤±&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;æŒ‡æ ‡è‚¯å®šæ˜¯é…ç½®äº†ï¼Œæ•°æ®ä¹Ÿæ²¡æœ‰è¿‡æœŸï¼ŒğŸ“‰ è¯·æ±‚é‡å¤ªå°ï¼Œquantile æ— æ³•è®¡ç®—ï¼Œæ»‘åŠ¨çª—å£æœºåˆ¶ï¼Œè¿‡äº†è¿™æ®µæ—¶é—´ï¼Œå°±ä¸ä¼šå†çº³å…¥ç»Ÿè®¡èŒƒå›´ã€‚&lt;/p&gt;
&lt;p&gt;åˆ†ä½æ•°ï¼ˆå¦‚ p99ï¼‰æ˜¯é€šè¿‡é‡‡æ ·ç»Ÿè®¡è®¡ç®—çš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœæŸæ®µæ—¶é—´å†…è¯·æ±‚æ•°å¤ªå°‘ï¼ˆå¦‚ 1~2 ä¸ªè¯·æ±‚ï¼‰ï¼Œp99 çš„è®¡ç®—æ˜¯&lt;strong&gt;ä¸ç¨³å®šæˆ–æ²¡æœ‰ä»£è¡¨æ„ä¹‰&lt;/strong&gt;ï¼›&lt;/li&gt;
&lt;li&gt;Prometheus &lt;strong&gt;å®¢æˆ·ç«¯ SDK ä¼šé€‰æ‹©ä¸æš´éœ²è¯¥ quantile æ—¶é—´åºåˆ—&lt;/strong&gt;ï¼Œä»¥é¿å…è¯¯å¯¼ï¼›&lt;/li&gt;
&lt;li&gt;æ‰€ä»¥ä½ ä¼šçœ‹åˆ° &lt;code&gt;_sum&lt;/code&gt;ã€&lt;code&gt;_count&lt;/code&gt; æ­£å¸¸ç´¯åŠ ï¼Œä½† &lt;code&gt;quantile=&amp;quot;0.99&amp;quot;&lt;/code&gt; æ²¡æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;histogram-å’Œ-summary-çš„åŒºåˆ«&#34;&gt;Histogram å’Œ Summary çš„åŒºåˆ«
&lt;/h2&gt;&lt;h3 id=&#34;histogram&#34;&gt;&lt;strong&gt;Histogram&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;:&lt;br&gt;
Histogram ä¼šå°†æ•°æ®åˆ†æ¡¶ï¼ˆbucketsï¼‰ï¼Œè®°å½•æ¯ä¸ªæ¡¶ä¸­è½å…¥çš„æ ·æœ¬æ•°é‡ã€‚&lt;br&gt;
ä¾‹å¦‚ï¼Œå®šä¹‰çš„æ¡¶ä¸º &lt;code&gt;[10ms, 50ms, 100ms, 500ms, 1s]&lt;/code&gt;ï¼Œæ¯æ¬¡è¯·æ±‚çš„è€—æ—¶ä¼šè¢«å½’å…¥å¯¹åº”çš„æ¡¶ä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥åœ¨ Prometheus ä¸­èšåˆå¤šä¸ªå®ä¾‹çš„æ•°æ®ï¼ˆä¾‹å¦‚å¤šä¸ªæœåŠ¡èŠ‚ç‚¹çš„è¯·æ±‚è€—æ—¶åˆ†å¸ƒï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;é€‚åˆè®¡ç®—åˆ†ä½æ•°ï¼ˆå¦‚ P50ã€P95ã€P99ï¼‰å’Œè§‚å¯Ÿè€—æ—¶åˆ†å¸ƒã€‚&lt;/li&gt;
&lt;li&gt;æä¾›äº†çµæ´»çš„æŸ¥è¯¢èƒ½åŠ›ï¼Œæ”¯æŒé€šè¿‡ PromQL åŠ¨æ€è®¡ç®—åˆ†ä½æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éœ€è¦é¢„å®šä¹‰æ¡¶çš„èŒƒå›´ï¼Œé€‰æ‹©ä¸å½“å¯èƒ½å¯¼è‡´æ•°æ®åˆ†å¸ƒä¸å‡ï¼ˆä¾‹å¦‚ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½è½åœ¨ä¸€ä¸ªæ¡¶ä¸­ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ¡¶çš„æ•°é‡è¶Šå¤šï¼Œå­˜å‚¨å’Œè®¡ç®—çš„å¼€é”€è¶Šå¤§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éœ€è¦èšåˆå¤šä¸ªå®ä¾‹çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦åŠ¨æ€è°ƒæ•´åˆ†ä½æ•°æˆ–åˆ†æè€—æ—¶åˆ†å¸ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;summary&#34;&gt;&lt;strong&gt;Summary&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;:&lt;br&gt;
Summary ä¼šåœ¨å®¢æˆ·ç«¯ç›´æ¥è®¡ç®—åˆ†ä½æ•°ï¼ˆå¦‚ P50ã€P95ã€P99ï¼‰ï¼Œå¹¶å°†ç»“æœä¸ŠæŠ¥åˆ° Prometheusã€‚&lt;br&gt;
å®ƒè¿˜ä¼šè®°å½•æ ·æœ¬çš„æ€»æ•°å’Œæ€»å’Œï¼Œç”¨äºè®¡ç®—å¹³å‡å€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸éœ€è¦é¢„å®šä¹‰æ¡¶ï¼Œç›´æ¥æä¾›åˆ†ä½æ•°ç»“æœã€‚&lt;/li&gt;
&lt;li&gt;é€‚åˆå•å®ä¾‹çš„ç²¾ç¡®åˆ†ä½æ•°è®¡ç®—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ†ä½æ•°çš„è®¡ç®—æ˜¯åœ¨å®¢æˆ·ç«¯å®Œæˆçš„ï¼Œæ— æ³•åœ¨ Prometheus ä¸­èšåˆå¤šä¸ªå®ä¾‹çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœéœ€è¦è°ƒæ•´åˆ†ä½æ•°ï¼ˆå¦‚ä» P95 æ”¹ä¸º P99ï¼‰ï¼Œéœ€è¦ä¿®æ”¹ä»£ç å¹¶é‡æ–°éƒ¨ç½²ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å•å®ä¾‹ç›‘æ§ï¼Œä¸”å¯¹åˆ†ä½æ•°çš„ç²¾ç¡®æ€§è¦æ±‚è¾ƒé«˜ã€‚&lt;/li&gt;
&lt;li&gt;ä¸éœ€è¦èšåˆå¤šä¸ªå®ä¾‹çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä¸»è¦åŒºåˆ«å¯¹æ¯”&#34;&gt;&lt;strong&gt;ä¸»è¦åŒºåˆ«å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;Histogram&lt;/th&gt;
&lt;th&gt;Summary&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†ä½æ•°è®¡ç®—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨ Prometheus ä¸­åŠ¨æ€è®¡ç®—&lt;/td&gt;
&lt;td&gt;åœ¨å®¢æˆ·ç«¯ç›´æ¥è®¡ç®—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šå®ä¾‹èšåˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒ&lt;/td&gt;
&lt;td&gt;ä¸æ”¯æŒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¡¶çš„å®šä¹‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€è¦é¢„å®šä¹‰&lt;/td&gt;
&lt;td&gt;ä¸éœ€è¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨å¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å–å†³äºæ¡¶çš„æ•°é‡&lt;/td&gt;
&lt;td&gt;å›ºå®šå¼€é”€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆå¯åŠ¨æ€è°ƒæ•´åˆ†ä½æ•°ï¼‰&lt;/td&gt;
&lt;td&gt;ä½ï¼ˆéœ€ä¿®æ”¹ä»£ç è°ƒæ•´åˆ†ä½æ•°ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;æ€»ç»“&#34;&gt;&lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å¦‚æœéœ€è¦èšåˆå¤šä¸ªå®ä¾‹çš„æ•°æ®ï¼Œæˆ–è€…éœ€è¦çµæ´»è°ƒæ•´åˆ†ä½æ•°ï¼Œé€‰æ‹© &lt;strong&gt;Histogram&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœåªéœ€è¦å•å®ä¾‹çš„ç²¾ç¡®åˆ†ä½æ•°ï¼Œä¸”åˆ†ä½æ•°å›ºå®šï¼Œé€‰æ‹© &lt;strong&gt;Summary&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨ä½ çš„åœºæ™¯ä¸­ï¼Œç”±äºæœåŠ¡æ˜¯åˆ†å¸ƒå¼çš„ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨ &lt;strong&gt;Histogram&lt;/strong&gt;ï¼Œè¿™æ ·å¯ä»¥åœ¨ Prometheus ä¸­èšåˆæ‰€æœ‰å®ä¾‹çš„æ•°æ®ï¼Œå¹¶åŠ¨æ€è®¡ç®—åˆ†ä½æ•°å’Œè€—æ—¶åˆ†å¸ƒã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;æ»‘åŠ¨çª—å£çš„æ¦‚å¿µåŠå…¶ä¸-histogram-å’Œ-summary-çš„å…³ç³»&#34;&gt;æ»‘åŠ¨çª—å£çš„æ¦‚å¿µåŠå…¶ä¸ Histogram å’Œ Summary çš„å…³ç³»
&lt;/h2&gt;&lt;h3 id=&#34;æ»‘åŠ¨çª—å£çš„æ¦‚å¿µ&#34;&gt;&lt;strong&gt;æ»‘åŠ¨çª—å£çš„æ¦‚å¿µ&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;æ»‘åŠ¨çª—å£æ˜¯ä¸€ç§æ—¶é—´çª—å£æœºåˆ¶ï¼Œç”¨äºç»Ÿè®¡ä¸€æ®µæ—¶é—´å†…çš„æ•°æ®å˜åŒ–ã€‚å®ƒé€šè¿‡ä¸æ–­ç§»åŠ¨çš„æ—¶é—´èŒƒå›´ï¼ŒåŠ¨æ€åæ˜ ç³»ç»Ÿçš„å®æ—¶çŠ¶æ€ã€‚æ»‘åŠ¨çª—å£çš„ç‰¹ç‚¹æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å›ºå®šæ—¶é—´èŒƒå›´&lt;/strong&gt;ï¼šçª—å£çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œä¾‹å¦‚æœ€è¿‘ 1 åˆ†é’Ÿã€5 åˆ†é’Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®æ—¶æ›´æ–°&lt;/strong&gt;ï¼šéšç€æ—¶é—´çš„æ¨ç§»ï¼Œçª—å£ä¼šæ»‘åŠ¨ï¼Œæ—§çš„æ•°æ®è¢«ç§»å‡ºçª—å£ï¼Œæ–°æ•°æ®è¢«åŠ å…¥çª—å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¸è§ç”¨é€”&lt;/strong&gt;ï¼šç”¨äºè®¡ç®—å®æ—¶æŒ‡æ ‡ï¼ˆå¦‚è¯·æ±‚é€Ÿç‡ã€å¹³å‡å€¼ã€åˆ†ä½æ•°ç­‰ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨ Prometheus ä¸­ï¼Œæ»‘åŠ¨çª—å£é€šå¸¸é€šè¿‡æŸ¥è¯¢å‡½æ•°ï¼ˆå¦‚ &lt;code&gt;rate()&lt;/code&gt;ã€&lt;code&gt;avg_over_time()&lt;/code&gt;ï¼‰å®ç°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ»‘åŠ¨çª—å£ä¸-histogram-çš„å…³ç³»&#34;&gt;&lt;strong&gt;æ»‘åŠ¨çª—å£ä¸ Histogram çš„å…³ç³»&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Histogram çš„æ•°æ®ç»“æ„&lt;/strong&gt;ï¼š&lt;br&gt;
Histogram ä¼šå°†æ ·æœ¬æ•°æ®åˆ†æ¡¶ï¼Œå¹¶è®°å½•æ¯ä¸ªæ¡¶çš„è®¡æ•°ã€‚Prometheus ä¼šå‘¨æœŸæ€§åœ°æŠ“å–è¿™äº›è®¡æ•°å€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ»‘åŠ¨çª—å£çš„å®ç°&lt;/strong&gt;ï¼š&lt;br&gt;
åœ¨ Prometheus ä¸­ï¼Œå¯ä»¥é€šè¿‡æŸ¥è¯¢è¯­å¥å¯¹ Histogram çš„æ•°æ®åº”ç”¨æ»‘åŠ¨çª—å£ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;rate(http_request_duration_seconds_bucket[5m])&lt;/code&gt;ï¼šè®¡ç®—è¿‡å» 5 åˆ†é’Ÿå†…æ¯ä¸ªæ¡¶çš„è¯·æ±‚é€Ÿç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))&lt;/code&gt;ï¼šè®¡ç®—è¿‡å» 5 åˆ†é’Ÿå†…çš„ P95 åˆ†ä½æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ»‘åŠ¨çª—å£å¯ä»¥åŠ¨æ€åæ˜ æœ€è¿‘ä¸€æ®µæ—¶é—´çš„è¯·æ±‚è€—æ—¶åˆ†å¸ƒã€‚&lt;/li&gt;
&lt;li&gt;Histogram çš„åˆ†æ¡¶æœºåˆ¶ä¸æ»‘åŠ¨çª—å£ç»“åˆï¼Œå¯ä»¥é«˜æ•ˆè®¡ç®—åˆ†ä½æ•°å’Œåˆ†å¸ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ»‘åŠ¨çª—å£ä¸-summary-çš„å…³ç³»&#34;&gt;&lt;strong&gt;æ»‘åŠ¨çª—å£ä¸ Summary çš„å…³ç³»&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Summary çš„æ•°æ®ç»“æ„&lt;/strong&gt;ï¼š&lt;br&gt;
Summary ä¼šåœ¨å®¢æˆ·ç«¯ç›´æ¥è®¡ç®—åˆ†ä½æ•°ï¼Œå¹¶ä¸ŠæŠ¥åˆ° Prometheusã€‚å®ƒè¿˜ä¼šè®°å½•æ ·æœ¬æ€»æ•°å’Œæ€»å’Œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ»‘åŠ¨çª—å£çš„å®ç°&lt;/strong&gt;ï¼š&lt;br&gt;
åœ¨ Prometheus ä¸­ï¼Œå¯ä»¥é€šè¿‡æŸ¥è¯¢è¯­å¥å¯¹ Summary çš„æ•°æ®åº”ç”¨æ»‘åŠ¨çª—å£ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;rate(http_request_duration_seconds_sum[5m]) / rate(http_request_duration_seconds_count[5m])&lt;/code&gt;ï¼šè®¡ç®—è¿‡å» 5 åˆ†é’Ÿå†…çš„å¹³å‡è¯·æ±‚è€—æ—¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é™åˆ¶&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Summary çš„åˆ†ä½æ•°æ˜¯å®¢æˆ·ç«¯è®¡ç®—çš„ï¼Œæ— æ³•åœ¨ Prometheus ä¸­é‡æ–°è®¡ç®—åˆ†ä½æ•°ï¼Œå› æ­¤æ»‘åŠ¨çª—å£å¯¹åˆ†ä½æ•°çš„æ”¯æŒæœ‰é™ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœéœ€è¦èšåˆå¤šä¸ªå®ä¾‹çš„æ•°æ®ï¼Œæ»‘åŠ¨çª—å£æ— æ³•ç›´æ¥ä½œç”¨äº Summary çš„åˆ†ä½æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ»‘åŠ¨çª—å£çš„é€‚ç”¨åœºæ™¯&#34;&gt;&lt;strong&gt;æ»‘åŠ¨çª—å£çš„é€‚ç”¨åœºæ™¯&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®æ—¶ç›‘æ§&lt;/strong&gt;ï¼šæ»‘åŠ¨çª—å£é€‚åˆç”¨äºç›‘æ§ç³»ç»Ÿçš„å®æ—¶çŠ¶æ€ï¼Œä¾‹å¦‚æœ€è¿‘ 1 åˆ†é’Ÿçš„è¯·æ±‚é€Ÿç‡ã€è€—æ—¶åˆ†å¸ƒç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚å¸¸æ£€æµ‹&lt;/strong&gt;ï¼šé€šè¿‡æ»‘åŠ¨çª—å£ï¼Œå¯ä»¥å¿«é€Ÿå‘ç°çŸ­æ—¶é—´å†…çš„å¼‚å¸¸æƒ…å†µï¼ˆå¦‚è¯·æ±‚è€—æ—¶çªç„¶å¢åŠ ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€åˆ†æ&lt;/strong&gt;ï¼šæ»‘åŠ¨çª—å£å¯ä»¥åŠ¨æ€åæ˜ ç³»ç»Ÿçš„å˜åŒ–è¶‹åŠ¿ï¼Œè€Œä¸æ˜¯é™æ€çš„å…¨å±€ç»Ÿè®¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ€»ç»“-1&#34;&gt;&lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Histogram&lt;/strong&gt; ä¸æ»‘åŠ¨çª—å£ç»“åˆï¼Œå¯ä»¥åŠ¨æ€è®¡ç®—åˆ†ä½æ•°ï¼ˆå¦‚ P95ã€P99ï¼‰å’Œè¯·æ±‚è€—æ—¶åˆ†å¸ƒï¼Œé€‚åˆåˆ†å¸ƒå¼ç³»ç»Ÿçš„ç›‘æ§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Summary&lt;/strong&gt; ä¸æ»‘åŠ¨çª—å£ç»“åˆï¼Œå¯ä»¥è®¡ç®—å¹³å‡å€¼ç­‰ç®€å•æŒ‡æ ‡ï¼Œä½†åˆ†ä½æ•°çš„çµæ´»æ€§è¾ƒå·®ï¼Œä¸”ä¸æ”¯æŒå¤šå®ä¾‹èšåˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨ä½ çš„åœºæ™¯ä¸­ï¼Œç”±äºéœ€è¦ç›‘æ§æç«¯è¯·æ±‚è€—æ—¶ï¼ˆå¦‚ P99ï¼‰å’Œå¤§éƒ¨åˆ†è¯·æ±‚çš„å¹³å‡å€¼ï¼Œå»ºè®®ä½¿ç”¨ &lt;strong&gt;Histogram&lt;/strong&gt;ï¼Œå¹¶ç»“åˆæ»‘åŠ¨çª—å£æŸ¥è¯¢æ¥åŠ¨æ€åˆ†æç³»ç»Ÿçš„æ€§èƒ½è¡¨ç°ã€‚&lt;/p&gt;</description>
        </item>
        
    </channel>
</rss>
