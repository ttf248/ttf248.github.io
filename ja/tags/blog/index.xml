<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Blog on 向叔の手帳</title>
        <link>https://ttf248.life/ja/tags/blog/</link>
        <description>Recent content in Blog on 向叔の手帳</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>ja</language>
        <lastBuildDate>Sun, 25 May 2025 14:10:37 +0800</lastBuildDate><atom:link href="https://ttf248.life/ja/tags/blog/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>思ったより簡単なことだが、コードコピーボタンを追加する。</title>
        <link>https://ttf248.life/ja/p/add-code-copy-button/</link>
        <pubDate>Fri, 25 Feb 2022 01:23:39 +0800</pubDate>
        
        <guid>https://ttf248.life/ja/p/add-code-copy-button/</guid>
        <description>&lt;p&gt;四時間も格闘して、この文を見たときは笑ってしまった。こんなに時間がかかるなんてありえないと思ったのに。よく見たら三時間だった。&lt;/p&gt;
&lt;p&gt;算是二零二二年開年の第一篇稿子，要搞的東西不複雜，就和標題說的一模一樣（此時的我還很年輕），以為照抄 &lt;a class=&#34;link&#34; href=&#34;https://ouuan.github.io/post/from-hexo-to-hugo/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;作業&lt;/a&gt; 就行，放到收藏夾裡面，拖拖拉拉等了一個多月，終於想起來這件事情。 算是二零二年年初的第一篇文章，要搞的東西不複雜，和標題完全一樣（當時的我還很年輕），以為照抄&lt;a class=&#34;link&#34; href=&#34;https://ouuan.github.io/post/from-hexo-to-hugo/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;作業&lt;/a&gt;就夠了，放進收藏夾裡，拖拖拉拉等了一個多月，終於想起來這件事。&lt;/p&gt;
&lt;p&gt;Hugoに移行したときから、プラグインが少なすぎると感じていました。コードのコピー＆ペーストができず、多くのノートを印象ノートからブログへ移行する際に、コードのコピーに関する作業が煩雑になり、ブログを書くモチベーションを著しく損ねてしまいました。&lt;/p&gt;
&lt;h2 id=&#34;前章&#34;&gt;前章
&lt;/h2&gt;&lt;p&gt;まずは原著者の稿をよく見て、一度通読してから作者紹介を見てみよう。うわー、すごい人だ。清華大学の在校生で、早い段階からコンピュータに触れている。あー、なんとなく、まずこのブログを見てみよう。完全に何をしようとしていたか思い出せない。ついでに作者の&lt;code&gt;Github&lt;/code&gt;リポジトリも見てみよう。この修正された&lt;code&gt;even&lt;/code&gt;テーマは今のものよりずっといいし、機能も多い。やってみるか。まずは関連コードをマージしてしまおう。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://ttf248.life/p/add-code-copy-button/2022-02-25-02-08-19.png&#34;
	width=&#34;215&#34;
	height=&#34;150&#34;
	
	loading=&#34;lazy&#34;
	
		alt=&#34;1&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;143&#34;
		data-flex-basis=&#34;344px&#34;
	
&gt; &lt;img src=&#34;https://ttf248.life/p/add-code-copy-button/2022-02-25-02-08-40.png&#34;
	width=&#34;217&#34;
	height=&#34;167&#34;
	
	loading=&#34;lazy&#34;
	
		alt=&#34;1&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;129&#34;
		data-flex-basis=&#34;311px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;新機能記事履歴の確認関連提出記録の閲覧&#34;&gt;新機能：記事履歴の確認、関連提出記録の閲覧
&lt;/h3&gt;&lt;p&gt;効果はまだ良いです、記事の最後に引っ張れば体験できます。&lt;/p&gt;
&lt;p&gt;手を出す前に作者の元のリポジトリの履歴を細かく見ていなかった、単純なマージで済むだろうと思っていた。結局、大量のコードをマージしてしまい、途中で何度もコンフリクトが発生し、無駄に上書きしてしまった。すべてはフロントエンドとレンダリングのテンプレートコードで、私の望むものが優先された。&lt;/p&gt;
&lt;p&gt;倉庫アドレス：&lt;a class=&#34;link&#34; href=&#34;https://github.com/TianlongXiang/hugo-theme-even&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/TianlongXiang/hugo-theme-even&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;中国の一つの落とし穴ですが、&lt;code&gt;git&lt;/code&gt;でこのパラメータを調整しないと、現在の記事の&lt;code&gt;コミットハッシュ&lt;/code&gt;が取得できず、過去のリンクの生成に失敗します。完全な記事履歴を生成する際も、自動統合スクリプトを変更する必要があり、現在のリポジトリ全体の履歴レコードを必ずプルしてください。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;機能：完全なGitHubリポジトリの取得を試み、記事の最終更新記録を動的に更新する&lt;/li&gt;
&lt;li&gt;パスが存在する中国語です。HugoのGitInfoの設定を有効にする必要があります。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;name: Build Github
run: git config --global core.quotePath false &amp;amp;&amp;amp; hugo -b &amp;quot;https://www.xiangtianlong.com/&amp;quot; -d &amp;quot;github_public&amp;quot; &amp;amp;&amp;amp; ls
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;スタイル調整&#34;&gt;スタイル調整
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;サイトコンテンツの幅を調整する。以前のデザインはモバイルとPC向けだったが、実際には誰もスマホで見ていないし、私もPCで見ている。&lt;/li&gt;
&lt;li&gt;目次バーは自動伸縮に対応しています。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;正文&#34;&gt;正文
&lt;/h2&gt;&lt;p&gt;参照 &lt;code&gt;ouuan&lt;/code&gt; のコード記録を半時間以上見ていても、どうやってコピーボタンを追加しているのかよくわからなかった。&lt;/p&gt;
&lt;p&gt;時間が過ぎて、一ヶ月後、またこのことを思い出した。&lt;/p&gt;
&lt;p&gt;既然この課題が理解できないなら、別の課題を写し転がせば、なんとかなるだろう。検索した結果は結構意外だった。&lt;code&gt;hugo&lt;/code&gt;の公式フォーラムにもコピーボタンを追加する方法についての投稿があったので行ってみると、論理は明確だった。そして、驚いたことに、再現されたコードブロックのスタイルが資料の説明と異なっていた。このあたりは少し面倒なので、簡単に記録しておく。&lt;/p&gt;
&lt;p&gt;基本的なフロントエンド開発がほとんど分からないので、分からない箇所はブラウザの「要素を検証」を開き、コードと右側のスタイル情報を見て、少しずつ論理を理解しました。「JavaScript」は理解できませんでしたが、コンソールにログを出力しました。分からないことはたくさんありましたが、落ち着いてゆっくりと論理を整理・分解することで、必ず解決策が見つかります。&lt;/p&gt;
&lt;p&gt;プレタグが複数あり、ここでは単一のコードブロックを指しますが、テーマ自体が行番号を出力しているため、コピーボタンが2つ表示されるようになります。
コードハイライトのレンダリングをテーマに組み込みたいのだが、このテーマの設定がよくわからない。
Hugoの公式サイトで資料を見たところ、半分くらい理解できた。コードハイライトを制御できる&lt;code&gt;markup&lt;/code&gt;設定があることは分かった。
設定ファイルを調整しても、どうにもうまくいかず、レンダリング結果が期待と異なっている。
この設定&lt;code&gt;pygmentsOptions&lt;/code&gt;の山をいくつか見つけたので、さらに資料を調べ、設定を調整する。とりあえず行番号は取り除く。
カスタムの&lt;code&gt;css&lt;/code&gt;スタイルシートとカスタムの&lt;code&gt;js&lt;/code&gt;スクリプトを設定します。
色々やらかしてしまったので、ふと最近見た配色図が良さそうだなと思い、ボタンのスタイルを少し変更してみることに。中国風の天青色でやってみるか。&lt;/p&gt;
&lt;img class=&#34;special-img-class&#34; style=&#34;width:20%&#34; src=&#34;2022-02-25-02-01-22.png&#34; /&gt;
&lt;img class=&#34;special-img-class&#34; style=&#34;width:20%&#34; src=&#34;2022-02-25-02-01-33.png&#34; /&gt;
&lt;p&gt;四時間かけてやったのに、この文を見たときは笑ってしまった。こんなに時間がかかるなんてありえないと思った。でもよく見たら三時間だった。&lt;/p&gt;
&lt;h2 id=&#34;参照リンク&#34;&gt;参照リンク
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ouuan.github.io/post/from-hexo-to-hugo/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://ouuan.github.io/post/from-hexo-to-hugo/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://gohugobrasil.netlify.app/content-management/syntax-highlighting/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://gohugobrasil.netlify.app/content-management/syntax-highlighting/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://gohugo.io/getting-started/configuration-markup#highlight&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://gohugo.io/getting-started/configuration-markup#highlight&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.dannyguo.com/blog/how-to-add-copy-to-clipboard-buttons-to-code-blocks-in-hugo/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.dannyguo.com/blog/how-to-add-copy-to-clipboard-buttons-to-code-blocks-in-hugo/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
        </item>
        
    </channel>
</rss>
