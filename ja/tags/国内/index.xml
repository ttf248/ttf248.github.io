<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>国内 on 向叔の手帳</title>
        <link>https://ttf248.life/ja/tags/%E5%9B%BD%E5%86%85/</link>
        <description>Recent content in 国内 on 向叔の手帳</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>ja</language>
        <lastBuildDate>Sun, 25 May 2025 14:10:37 +0800</lastBuildDate><atom:link href="https://ttf248.life/ja/tags/%E5%9B%BD%E5%86%85/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Docker国内镜像代理失効</title>
        <link>https://ttf248.life/ja/p/docker-domestic-mirror-failure/</link>
        <pubDate>Sat, 04 Jan 2025 18:29:25 +0800</pubDate>
        
        <guid>https://ttf248.life/ja/p/docker-domestic-mirror-failure/</guid>
        <description>&lt;p&gt;国内サーバーにDockerをデプロイし、デプロイ後、もし会社がイメージセンターを提供していない場合、開発者がまず行うべきことは、国内のイメージ加速アドレスを設定することです。ちょうど今日、一台のサーバーがあり、イメージ加速アドレスを設定しましたが、イメージのプルダウンがずっとできません。&lt;/p&gt;
&lt;p&gt;エラー応答: デーモンからのエラー: &lt;code&gt;https://registry-1.docker.io/v2/&lt;/code&gt; への接続を待機中にタイムアウトが発生しました (&lt;code&gt;net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)&lt;/code&gt;)&lt;/p&gt;
&lt;p&gt;二日ぶりのことですが、全てのサーバーが復旧しました。なぜこれが話題にならないのか、国内のすべてのミラープロキシはダウンしています。&lt;/p&gt;
&lt;h2 id=&#34;トラブルシューティングと修理の試み&#34;&gt;トラブルシューティングと修理の試み
&lt;/h2&gt;&lt;p&gt;当初、別のミラーの加速アドレスに切り替えることを試みましたが、期待した効果はなく、問題は依然として解決されませんでした。&lt;/p&gt;
&lt;p&gt;直ちに、ローカルDNSの設定変更に着手し、ネットワーク解析のレベルで突破口を探りましたが、何度かデバッグしても、問題は依然として解決しませんでした。&lt;/p&gt;
&lt;p&gt;現時点では、ローカルネットワークの安定性が疑われているため、思い切って携帯電話のテザリングに切り替え、考えられるローカルネットワークの問題点を回避しようとしましたが、結果は落胆するもので、問題は全く改善されません。&lt;/p&gt;
&lt;h2 id=&#34;問題が拡大&#34;&gt;問題が拡大
&lt;/h2&gt;&lt;p&gt;現在も&lt;strong&gt;国内にいくつかサーバー&lt;/strong&gt;があり、それらはすべて Docker 環境がインストールされています。これらのサーバーでイメージのプルを試みましたが、別の方法を見つけられるのではないかと考えていましたが、例外なくすべて失敗し、エラーメッセージは全く同じでした。これは問題が特定のデバイスに限られたものではないことを示しています。&lt;/p&gt;
&lt;p&gt;さらに調査したところ、ミラープロキシが一時的に機能しなくなったようです。この緊急事態において、すぐに海外のサーバーに切り替えて試みると、幸いなことに、ここでミラーの取得は正常に戻り、問題はおおむね国内のネットワーク経路または関連設定にある可能性が高いことを意味します。&lt;/p&gt;
&lt;h2 id=&#34;戦術調整間接解決&#34;&gt;戦術調整：間接解決
&lt;/h2&gt;&lt;p&gt;国内の直接リソースミラーリングが様々な妨害を受けている現状と、海外ミラーは正常にアクセスできる状況を踏まえ、プロジェクトを迅速に進めるため、回り道をすることに決定しました。まず海外サーバーへ切り替え、必要なリソースミラーを問題なく取得した後、国内のリソースミラー倉庫へプッシュし、「データブリッジ」を構築します。&lt;/p&gt;
&lt;p&gt;同時に、Dockerfile ファイルも修正し、イメージのアドレスを国内環境に適合したアドレスに置き換えた後、再度イメージを構築し、最終的に正常にデプロイすることができた。&lt;/p&gt;</description>
        </item>
        
    </channel>
</rss>
