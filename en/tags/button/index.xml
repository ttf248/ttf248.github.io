<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Button on Uncle Xiang&#39;s Notebook</title>
        <link>https://ttf248.life/en/tags/button/</link>
        <description>Recent content in Button on Uncle Xiang&#39;s Notebook</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en</language>
        <lastBuildDate>Sun, 25 May 2025 02:57:45 +0800</lastBuildDate><atom:link href="https://ttf248.life/en/tags/button/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Add a code copy button for something that seems simple</title>
        <link>https://ttf248.life/en/p/add-code-copy-button/</link>
        <pubDate>Fri, 25 Feb 2022 01:23:39 +0800</pubDate>
        
        <guid>https://ttf248.life/en/p/add-code-copy-button/</guid>
        <description>&lt;blockquote&gt;
&lt;p&gt;I spent four hours on it, and when I saw that sentence, I thought it was funny – how could it take so long? Then I looked at the time: three hours&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It&amp;rsquo;s considered the first draft of 2022. Nothing complicated to do, just exactly as the title says (I was still quite young then). I thought simply copying &lt;a class=&#34;link&#34; href=&#34;https://ouuan.github.io/post/from-hexo-to-hugo/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;the assignment&lt;/a&gt; would be enough, saved it in my bookmarks, and waited for over a month before finally remembering this thing.&lt;/p&gt;
&lt;p&gt;I always felt that Hugo had too few plugins when I migrated to it, and the inability to copy code made migrating notes from Evernote to my blog a cumbersome process. Copying code for those notes became tedious, seriously hindering my motivation to update my blog.&lt;/p&gt;
&lt;h2 id=&#34;prologue&#34;&gt;Prologue
&lt;/h2&gt;&lt;p&gt;Let&amp;rsquo;s take a close look at the original author&amp;rsquo;s draft, read it through and then check out their introduction. Wow, I’ve stumbled upon an expert – a full-time undergraduate student at Tsinghua who started working with computers very early on. Man, they&amp;rsquo;re really something. Let me check out this blog first; I completely forgot what I was supposed to do. Oh, and let&amp;rsquo;s also take a look at the author&amp;rsquo;s &lt;code&gt;Github&lt;/code&gt; repository. This modified &lt;code&gt;even&lt;/code&gt; theme is much better than the current one – it has so many new features. Let’s get it done. First, merge the relevant code over here.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://ttf248.life/p/add-code-copy-button/2022-02-25-02-08-19.png&#34;
	width=&#34;215&#34;
	height=&#34;150&#34;
	
	loading=&#34;lazy&#34;
	
		alt=&#34;1&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;143&#34;
		data-flex-basis=&#34;344px&#34;
	
&gt; &lt;img src=&#34;https://ttf248.life/p/add-code-copy-button/2022-02-25-02-08-40.png&#34;
	width=&#34;217&#34;
	height=&#34;167&#34;
	
	loading=&#34;lazy&#34;
	
		alt=&#34;1&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;129&#34;
		data-flex-basis=&#34;311px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;new-feature-view-article-history-and-related-submission-records&#34;&gt;New feature: View article history and related submission records
&lt;/h3&gt;&lt;p&gt;The effect is still pretty good; you can experience it by scrolling to the end of the article&lt;/p&gt;
&lt;p&gt;I didn&amp;rsquo;t really look at the author’s repository history before starting, thinking a simple merge would be fine. In the end, I merged a bunch of code, with conflicts and numerous iterations. I blindly overwrote things, mostly frontend and rendering templates, prioritizing what I wanted.&lt;/p&gt;
&lt;p&gt;Repository address: &lt;a class=&#34;link&#34; href=&#34;https://github.com/TianlongXiang/hugo-theme-even&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/TianlongXiang/hugo-theme-even&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A pitfall with Chinese documentation is that if you don&amp;rsquo;t adjust this parameter, &lt;code&gt;git&lt;/code&gt; won&amp;rsquo;t be able to retrieve the current article&amp;rsquo;s &lt;code&gt;commit hash&lt;/code&gt;, leading to failed generation of historical links. You also need to modify the automated integration script when generating a complete history of articles; remember to pull all historical records from the current repository.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Attempting to pull the complete GitHub repository for dynamically updating the record of last modification time for articles&lt;/li&gt;
&lt;li&gt;Path exists in Chinese, Hugo GitInfo needs this setting enabled&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;name: Build Github
run: git config --global core.quotePath false &amp;amp;&amp;amp; hugo -b &amp;quot;https://www.xiangtianlong.com/&amp;quot; -d &amp;quot;github_public&amp;quot; &amp;amp;&amp;amp; ls
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;style-adjustments&#34;&gt;Style adjustments
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Adjust the site content width. The previous design was suitable for both mobile and desktop, but in reality, no one views it on their phone; I even view it on my computer myself.&lt;/li&gt;
&lt;li&gt;The directory bar supports auto-sizing&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;main-body&#34;&gt;Main body
&lt;/h2&gt;&lt;p&gt;I spent over half an hour looking at &lt;code&gt;ouuan&lt;/code&gt;&amp;rsquo;s code, but I still don’t really understand how to add the copy button&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Time passes, and after a month, I thought of this again&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Since I didn&amp;rsquo;t understand this assignment, let’s just copy another one; I should be able to figure it out eventually. The search results were surprisingly good – there was even a post in the &lt;code&gt;hugo&lt;/code&gt; official forum mentioning how to add a copy button. After checking it out, the logic is clear. Then something unexpected happened: when I looked at the site, the code block style rendered by &lt;code&gt;even&lt;/code&gt; differed from the description in the documentation. This part is a bit complicated, so here’s a brief record.&lt;/p&gt;
&lt;p&gt;Because I barely understood front-end development, whenever I didn&amp;rsquo;t understand something, I would open the browser&amp;rsquo;s &amp;ldquo;Inspect Element,&amp;rdquo; analyze the code, and rely on the style information on the right. Slowly, I began to understand the logic. I didn’t understand JavaScript, so I added some logs in the console. There were many things I didn&amp;rsquo;t understand, but I calmed down, slowly sorted out and broke down the logic, and eventually found a way forward.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;There are multiple &lt;code&gt;pre&lt;/code&gt; nodes, referring here to a single code block. The theme renders line numbers, resulting in two copy buttons appearing.&lt;/li&gt;
&lt;li&gt;I want code highlighting in the theme, but I&amp;rsquo;m not familiar with how to set it up in this theme&lt;/li&gt;
&lt;li&gt;I looked at the documentation on the Hugo website, and I understand that there&amp;rsquo;s a markup setting to control code highlighting&lt;/li&gt;
&lt;li&gt;Adjusting the configuration file, it&amp;rsquo;s always been wrong, and the rendering doesn&amp;rsquo;t match expectations&lt;/li&gt;
&lt;li&gt;I found these settings for &lt;code&gt;pygmentsOptions&lt;/code&gt;, continued researching, adjusted the settings, and first removed the line numbers&lt;/li&gt;
&lt;li&gt;Configure custom CSS stylesheets and configure custom JS scripts&lt;/li&gt;
&lt;li&gt;Since we&amp;rsquo;ve gotten things to this point, it suddenly occurred to me that I saw a color scheme recently that was pretty good. Let’s change the button style: going with a Chinese-style celadon blue.&lt;/li&gt;
&lt;/ol&gt;
&lt;img class=&#34;special-img-class&#34; style=&#34;width:20%&#34; src=&#34;2022-02-25-02-01-22.png&#34; /&gt;
&lt;img class=&#34;special-img-class&#34; style=&#34;width:20%&#34; src=&#34;2022-02-25-02-01-33.png&#34; /&gt;
&lt;p&gt;I spent four hours on it, and when I saw that sentence, I thought it was funny – how could it take so long? Then I looked at the time: three hours&lt;/p&gt;
&lt;h2 id=&#34;reference-link&#34;&gt;Reference link
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ouuan.github.io/post/from-hexo-to-hugo/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://ouuan.github.io/post/from-hexo-to-hugo/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://gohugobrasil.netlify.app/content-management/syntax-highlighting/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://gohugobrasil.netlify.app/content-management/syntax-highlighting/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://gohugo.io/getting-started/configuration-markup#highlight&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://gohugo.io/getting-started/configuration-markup#highlight&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.dannyguo.com/blog/how-to-add-copy-to-clipboard-buttons-to-code-blocks-in-hugo/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.dannyguo.com/blog/how-to-add-copy-to-clipboard-buttons-to-code-blocks-in-hugo/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
        </item>
        
    </channel>
</rss>
