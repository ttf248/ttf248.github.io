<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Button on Uncle Xiang&#39;s Notebook</title>
        <link>https://ttf248.life/en/tags/button/</link>
        <description>Recent content in Button on Uncle Xiang&#39;s Notebook</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en</language>
        <lastBuildDate>Sun, 01 Jun 2025 15:38:14 +0800</lastBuildDate><atom:link href="https://ttf248.life/en/tags/button/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Adding a code copy button – seemingly simple things</title>
        <link>https://ttf248.life/en/p/add-code-copy-button/</link>
        <pubDate>Fri, 25 Feb 2022 01:23:39 +0800</pubDate>
        
        <guid>https://ttf248.life/en/p/add-code-copy-button/</guid>
        <description>&lt;blockquote&gt;
&lt;p&gt;Spent four hours trying to figure this out, and when I saw the sentence, it was hilarious. How could it have taken so long? When I finally looked at the time, it was only three hours.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This was the first draft of the year 2022, and it wasn&amp;rsquo;t complicated – exactly as the title said. (At that time, I was still very young), I thought simply copying &lt;a class=&#34;link&#34; href=&#34;https://ouuan.github.io/post/from-hexo-to-hugo/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;作业&lt;/a&gt; would be enough, putting it in my favorites folder, and dragging it out for over a month before finally remembering the task.&lt;/p&gt;
&lt;p&gt;When migrating to &lt;code&gt;hugo&lt;/code&gt;, I always felt that the plugins were too few, couldn&amp;rsquo;t copy code, which made copying notes from Evernote to the blog very cumbersome, seriously hindering my motivation for writing a casual blog.&lt;/p&gt;
&lt;h2 id=&#34;foreword&#34;&gt;Foreword
&lt;/h2&gt;&lt;p&gt;First, carefully read the original author’s draft, read it through completely and flip through the author&amp;rsquo;s introduction. Wow, I encountered a big shot – Tsinghua University undergraduate, has been exposed to computers early on. Let’s see, just a facade, let’s take a look at this blog first, completely forgot what he was supposed to do. Also browse the author’s &lt;code&gt;Github&lt;/code&gt; repository, this modified ‘even’ theme is much more beautiful than now and has many new features, let&amp;rsquo;s get started, first merge the related code into the current one.
&lt;img src=&#34;https://ttf248.life/p/add-copy-button-for-simple-task/2022-02-25-02-08-19.png&#34;
	width=&#34;215&#34;
	height=&#34;150&#34;
	
	loading=&#34;lazy&#34;
	
		alt=&#34;1&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;143&#34;
		data-flex-basis=&#34;344px&#34;
	
&gt; &lt;img src=&#34;https://ttf248.life/p/add-copy-button-for-simple-task/2022-02-25-02-08-40.png&#34;
	width=&#34;217&#34;
	height=&#34;167&#34;
	
	loading=&#34;lazy&#34;
	
		alt=&#34;1&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;129&#34;
		data-flex-basis=&#34;311px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;new-features-view-article-history-associate-submission-records&#34;&gt;New Features: View Article History, Associate Submission Records
&lt;/h3&gt;&lt;p&gt;The effect is still good, and you can experience it by dragging it to the end of the article.&lt;/p&gt;
&lt;p&gt;Before taking action, I didn’t carefully examine the author&amp;rsquo;s original repository history, assuming a simple merge would fix everything. In the end, I merged a huge amount of code with numerous conflicts and N times of mindless overwriting – all of which were frontend and rendering template codes. I took the version I needed as the standard.&lt;/p&gt;
&lt;p&gt;Repository address: &lt;a class=&#34;link&#34; href=&#34;https://github.com/TianlongXiang/hugo-theme-even&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/TianlongXiang/hugo-theme-even&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A Chinese pitfall: if &lt;code&gt;git&lt;/code&gt; doesn’t adjust this parameter, the generated one won&amp;rsquo;t get the current article’s &lt;code&gt;commit hash&lt;/code&gt;, causing the history link generation to fail. When generating the complete historical record of the article, you also need to modify the automatic integration script and remember to pull the entire historical record of the current repository.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;[feat: Attempt to pull the full GitHub repository to dynamically update the last modification record of the article](&lt;a class=&#34;link&#34; href=&#34;https://github.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;new-features-view-article-history-associate-submission-records-1&#34;&gt;New Features: View Article History, Associate Submission Records
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/TianlongXiang/TianlongXiang.github.io/commit/1b5d719966737f16a8c67880370dc2722adea0b3&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;chore: Path contains Chinese, Hugo GitInfo needs to enable this setting&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;style-adjustments&#34;&gt;Style Adjustments
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Adjust website content width, the previous design was suitable for both mobile and desktop devices; in reality, no one actually viewed it on their phones, and I personally view it on my computer.&lt;/li&gt;
&lt;li&gt;The directory bar supports automatic expansion/collapse.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;body&#34;&gt;Body
&lt;/h2&gt;&lt;p&gt;Referenced the &lt;code&gt;ouuan&lt;/code&gt; code records for half an hour and still couldn&amp;rsquo;t quite understand how to increase the copy button.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Time travel, a month later, it came back to this matter again&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;body-1&#34;&gt;Body
&lt;/h2&gt;&lt;p&gt;Since I didn’t understand this assignment, I switched to copying from another one – it&amp;rsquo;s always easier to understand when you copy. The results of my searches were surprisingly helpful; a post on the official &lt;code&gt;hugo&lt;/code&gt; forum mentioned how to add a copy button. Going there to check, the logic was clear. It was baffling until I returned to the site and saw that the styling generated by &lt;code&gt;even&lt;/code&gt; differed from the description in the documentation – this part was quite complicated. I’m just going to record it simply.&lt;/p&gt;
&lt;p&gt;Because I don&amp;rsquo;t really understand front-end development, when I don&amp;rsquo;t know something, I open my browser’s “Inspect” tool and analyze the code, relying on the style information on the right side to slowly figure out the logic; I didn’t understand &lt;code&gt;JavaScript&lt;/code&gt;, so I added some logs to the console. There were many things I didn’t understand at first. Taking a deep breath and carefully sorting through and breaking down the logic, you can always find a solution.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;ol&gt;
&lt;li&gt;The &lt;code&gt;pre&lt;/code&gt; node has multiple instances; here it refers to a single code block, which the theme rendered with line numbers, resulting in two copies when the copy button is used.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;I wanted to disable the theme&amp;rsquo;s built-in code highlighting, but I’m unfamiliar with these theme settings.&lt;/li&gt;
&lt;li&gt;I consulted the &lt;code&gt;hugo&lt;/code&gt; website for resources and read a bit, learning that there’s a &lt;code&gt;markup&lt;/code&gt; setting to control code highlighting.&lt;/li&gt;
&lt;li&gt;Adjusting the configuration file didn’t work; the rendering was different from what I expected.&lt;/li&gt;
&lt;li&gt;I discovered this set of settings &lt;code&gt;pygmentsOptions&lt;/code&gt; and continued to consult documentation, adjusting the settings, starting by removing line numbers.&lt;/li&gt;
&lt;li&gt;I configured a custom &lt;code&gt;css&lt;/code&gt; stylesheet and a custom &lt;code&gt;js&lt;/code&gt; script.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;body-2&#34;&gt;Body
&lt;/h2&gt;&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;Since I’ve been doing so much, my brain suddenly thought of a color palette I saw recently that looked good, and changed the button styles: Let&amp;rsquo;s go with Chinese-style sky blue.&lt;/li&gt;
&lt;/ol&gt;
&lt;img class=&#34;special-img-class&#34; style=&#34;width:20%&#34; src=&#34;2022-02-25-02-01-22.png&#34; /&gt;
&lt;img class=&#34;special-img-class&#34; style=&#34;width:20%&#34; src=&#34;2022-02-25-02-01-33.png&#34; /&gt;
ouuan spent four hours on this, and when I saw that sentence, I even thought it was funny. How could it take so long? When I looked at the time, it was only three hours.
&lt;h2 id=&#34;references&#34;&gt;References
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ouuan.github.io/post/from-hexo-to-hugo/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://ouuan.github.io/post/from-hexo-to-hugo/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://gohugobrasil.netlify.app/content-management/syntax-highlighting/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://gohugobrasil.netlify.app/content-management/syntax-highlighting/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://gohugo.io/getting-started/configuration-markup#highlight&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://gohugo.io/getting-started/configuration-markup#highlight&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;reference-links&#34;&gt;Reference Links
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.dannyguo.com/blog/how-to-add-copy-to-clipboard-buttons-to-code-blocks-in-hugo/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.dannyguo.com/blog/how-to-add-copy-to-clipboard-buttons-to-code-blocks-in-hugo/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        
    </channel>
</rss>
