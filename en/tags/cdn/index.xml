<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>CDN on Uncle Xiang&#39;s Notebook</title>
        <link>https://ttf248.life/en/tags/cdn/</link>
        <description>Recent content in CDN on Uncle Xiang&#39;s Notebook</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en</language>
        <lastBuildDate>Sun, 25 May 2025 02:57:45 +0800</lastBuildDate><atom:link href="https://ttf248.life/en/tags/cdn/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Website acceleration and domain settings</title>
        <link>https://ttf248.life/en/p/website-acceleration-and-domain-setup/</link>
        <pubDate>Sat, 20 Jun 2020 10:36:27 +0800</pubDate>
        
        <guid>https://ttf248.life/en/p/website-acceleration-and-domain-setup/</guid>
        <description>&lt;p&gt;Due to slow access to GitHub Pages within China, the author applied for a personal domain name and purchased CDN acceleration services from a domestic cloud hosting provider. During the configuration process, the author encountered an issue where the www subdomain was inaccessible. The problem was eventually resolved by deleting the wildcard domain resolution and setting up the second-level domain separately. The author also shared the principles and configuration experience of CDN acceleration, as well as the attempts and lessons learned from using Nginx reverse proxy.&lt;/p&gt;
&lt;h3 id=&#34;background&#34;&gt;Background
&lt;/h3&gt;&lt;p&gt;The website is hosted on GitHub Pages, and due to some well-known reasons, accessing GitHub Pages from within China can be slow. Therefore, I applied for a personal domain name and purchased CDN acceleration services from a domestic cloud hosting provider. When setting up the acceleration service, I remembered that I had a development machine with Docker, frp, k8s, and other services deployed, all of which have corresponding dashboards. Following the principle of not wasting resources, I configured several reverse proxies and linked them to subdomains.&lt;/p&gt;
&lt;p&gt;When I was happily using my second-level domain, I suddenly found that the www subdomain was inaccessible. In Alibaba Cloud, DNS was configured to resolve simultaneously to both &lt;a class=&#34;link&#34; href=&#34;https://www.xiangtianlong.com&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;www.xiangtianlong.com&lt;/a&gt; and xiangtianlong.com. When CDN acceleration had not been enabled yet, both domains worked normally.&lt;/p&gt;
&lt;p&gt;When configuring CDN acceleration, due to having too many subdomains, a wildcard domain rule was enabled, routing everything to the development machine. This resulted in the www subdomain also going down. Yes, you read that right, www is a subdomain. The actual website is deployed on GitHub Pages, and the development machine has no cached web content.&lt;/p&gt;
&lt;p&gt;Regarding why the site wasn&amp;rsquo;t deployed on the development machine, it’s because it’s a static blog and paired with GitHub Actions, which automatically integrates and publishes – it’s really great&lt;/p&gt;
&lt;h3 id=&#34;domain-name&#34;&gt;Domain name
&lt;/h3&gt;&lt;p&gt;Non-professional web development doesn&amp;rsquo;t involve SEO or cross-domain issues when it comes to understanding domain names. For a blog site, using a bare domain can highlight the blogger’s site—this refers to people like me who use Chinese pinyin as their domain name—and with most access now being mobile, it allows for fewer characters to be entered.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The desktop version allows you to skip typing www and com using keyboard shortcuts&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;cdn&#34;&gt;CDN
&lt;/h3&gt;&lt;p&gt;I&amp;rsquo;ve used both Aliyun and Tencent Cloud, it’s not difficult for new users to get started. Tencent Cloud even has a video explaining the related concepts. The principle of CDN acceleration is the same as that of JD&amp;rsquo;s warehouse: when launching new products, they are pre-distributed to warehouses across the country, and when a delivery request is triggered, they are distributed from the nearest location.&lt;/p&gt;
&lt;p&gt;Return address: The original address where website resources were stored&lt;/p&gt;
&lt;p&gt;Cache file settings, browser F12, management console, simple analysis of static and dynamic resources&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;All 0 days validity&lt;/li&gt;
&lt;li&gt;0-day validity for .php, .jsp, .asp, .aspx&lt;/li&gt;
&lt;li&gt;.jpg, .png, .js, .css, .woff2 1-day validity&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tencent Cloud Configuration Rules:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cache expiration rules can be configured up to 10 entries&lt;/li&gt;
&lt;li&gt;The priority among multiple cache expiration rules is bottom-up&lt;/li&gt;
&lt;li&gt;The cache expiration time can be set up to a maximum of 365 days&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;a-lamentable-confession&#34;&gt;A Lamentable Confession
&lt;/h3&gt;&lt;p&gt;I hadn&amp;rsquo;t used Nginx before, and I thought I could understand the configuration of reverse proxy by simply searching online. But it was a bit confusing, and after fiddling with it for half a day, I couldn&amp;rsquo;t even figure out a 302 redirect. It was useless. So I decided to try a simple approach: deleting the wildcard domain resolution mode and setting up each second-level domain independently. That’s when I suddenly noticed that Alibaba Cloud DNS had a feature called &amp;ldquo;Display URL Jump,&amp;rdquo; and after trying it, it turned out to be exactly what I wanted – a 302 redirect.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I got the first secondary domain working fine, but when I tried to set up the second one, it didn&amp;rsquo;t work. I was almost starting to doubt myself. Then suddenly it started working after a while. It seems like Aliyun’s DNS propagation occasionally glitches out.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;reference-materials&#34;&gt;Reference materials
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Why are more and more website domains not adding the &amp;ldquo;www&amp;rdquo; prefix?&lt;/li&gt;
&lt;li&gt;What is the difference between a domain with www and one without www?&lt;/li&gt;
&lt;li&gt;Docker nginx Reverse Proxy Setup&lt;/li&gt;
&lt;/ul&gt;</description>
        </item>
        
    </channel>
</rss>
